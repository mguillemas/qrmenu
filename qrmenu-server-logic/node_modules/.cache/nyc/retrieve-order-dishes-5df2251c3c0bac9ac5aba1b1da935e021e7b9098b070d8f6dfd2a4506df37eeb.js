function cov_26lsrzzrsr(){var path="/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-order-dishes.js";var hash="08843f5ef50795fe6834555dd8e2b64541e0676a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-order-dishes.js",statementMap:{"0":{start:{line:1,column:40},end:{line:1,column:62}},"1":{start:{line:2,column:55},end:{line:2,column:80}},"2":{start:{line:3,column:0},end:{line:3,column:42}},"3":{start:{line:4,column:0},end:{line:4,column:41}},"4":{start:{line:6,column:0},end:{line:35,column:1}},"5":{start:{line:8,column:4},end:{line:8,column:36}},"6":{start:{line:9,column:4},end:{line:9,column:28}},"7":{start:{line:10,column:4},end:{line:10,column:29}},"8":{start:{line:12,column:4},end:{line:34,column:8}},"9":{start:{line:13,column:8},end:{line:13,column:16}},"10":{start:{line:14,column:30},end:{line:14,column:75}},"11":{start:{line:16,column:8},end:{line:16,column:112}},"12":{start:{line:16,column:27},end:{line:16,column:112}},"13":{start:{line:17,column:25},end:{line:17,column:38}},"14":{start:{line:20,column:22},end:{line:20,column:24}},"15":{start:{line:22,column:8},end:{line:28,column:11}},"16":{start:{line:23,column:25},end:{line:23,column:69}},"17":{start:{line:23,column:48},end:{line:23,column:68}},"18":{start:{line:24,column:12},end:{line:27,column:13}},"19":{start:{line:25,column:31},end:{line:25,column:35}},"20":{start:{line:26,column:16},end:{line:26,column:34}},"21":{start:{line:29,column:8},end:{line:29,column:16}},"22":{start:{line:30,column:8},end:{line:30,column:81}},"23":{start:{line:30,column:28},end:{line:30,column:81}},"24":{start:{line:32,column:8},end:{line:32,column:16}},"25":{start:{line:33,column:8},end:{line:33,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:58},end:{line:35,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:23},end:{line:34,column:5}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:35},end:{line:28,column:9}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:23,column:37},end:{line:23,column:38}},loc:{start:{line:23,column:48},end:{line:23,column:68}},line:23}},branchMap:{"0":{loc:{start:{line:16,column:8},end:{line:16,column:112}},type:"if",locations:[{start:{line:16,column:8},end:{line:16,column:112}},{start:{line:16,column:8},end:{line:16,column:112}}],line:16},"1":{loc:{start:{line:24,column:12},end:{line:27,column:13}},type:"if",locations:[{start:{line:24,column:12},end:{line:27,column:13}},{start:{line:24,column:12},end:{line:27,column:13}}],line:24},"2":{loc:{start:{line:30,column:8},end:{line:30,column:81}},type:"if",locations:[{start:{line:30,column:8},end:{line:30,column:81}},{start:{line:30,column:8},end:{line:30,column:81}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"08843f5ef50795fe6834555dd8e2b64541e0676a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_26lsrzzrsr=function(){return actualCoverage;};}return actualCoverage;}cov_26lsrzzrsr();const{models:{Establishment,Dish}}=(cov_26lsrzzrsr().s[0]++,require('qrmenu-data'));const{errors:{UnexistenceError,CredentialsError}}=(cov_26lsrzzrsr().s[1]++,require('qrmenu-commons'));cov_26lsrzzrsr().s[2]++;require('qrmenu-commons/polyfills/string');cov_26lsrzzrsr().s[3]++;require('qrmenu-commons/polyfills/array');cov_26lsrzzrsr().s[4]++;module.exports=(establishmentId,tableId,dishesIds)=>{cov_26lsrzzrsr().f[0]++;cov_26lsrzzrsr().s[5]++;String.validate(establishmentId);cov_26lsrzzrsr().s[6]++;String.validate(tableId);cov_26lsrzzrsr().s[7]++;Array.validate(dishesIds);cov_26lsrzzrsr().s[8]++;return(async()=>{cov_26lsrzzrsr().f[1]++;cov_26lsrzzrsr().s[9]++;debugger;const establishment=(cov_26lsrzzrsr().s[10]++,await Establishment.findById(establishmentId));cov_26lsrzzrsr().s[11]++;if(!establishment){cov_26lsrzzrsr().b[0][0]++;cov_26lsrzzrsr().s[12]++;throw new UnexistenceError(`Establishment with id ${establishmentId} does not exist`);}else{cov_26lsrzzrsr().b[0][1]++;}const{dishes}=(cov_26lsrzzrsr().s[13]++,establishment);let _dishes=(cov_26lsrzzrsr().s[14]++,[]);cov_26lsrzzrsr().s[15]++;dishesIds.forEach(_dish=>{cov_26lsrzzrsr().f[2]++;const dish=(cov_26lsrzzrsr().s[16]++,dishes.find(element=>{cov_26lsrzzrsr().f[3]++;cov_26lsrzzrsr().s[17]++;return element.id===_dish;}));cov_26lsrzzrsr().s[18]++;if(typeof dish!=='undefined'){cov_26lsrzzrsr().b[1][0]++;const{name}=(cov_26lsrzzrsr().s[19]++,dish);cov_26lsrzzrsr().s[20]++;_dishes.push(name);}else{cov_26lsrzzrsr().b[1][1]++;}});cov_26lsrzzrsr().s[21]++;debugger;cov_26lsrzzrsr().s[22]++;if(!_dishes.length){cov_26lsrzzrsr().b[2][0]++;cov_26lsrzzrsr().s[23]++;throw new UnexistenceError('No dishes with this ids');}else{cov_26lsrzzrsr().b[2][1]++;}cov_26lsrzzrsr().s[24]++;debugger;cov_26lsrzzrsr().s[25]++;return _dishes;})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLW9yZGVyLWRpc2hlcy5qcyJdLCJuYW1lcyI6WyJtb2RlbHMiLCJFc3RhYmxpc2htZW50IiwiRGlzaCIsInJlcXVpcmUiLCJlcnJvcnMiLCJVbmV4aXN0ZW5jZUVycm9yIiwiQ3JlZGVudGlhbHNFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJlc3RhYmxpc2htZW50SWQiLCJ0YWJsZUlkIiwiZGlzaGVzSWRzIiwiU3RyaW5nIiwidmFsaWRhdGUiLCJBcnJheSIsImVzdGFibGlzaG1lbnQiLCJmaW5kQnlJZCIsImRpc2hlcyIsIl9kaXNoZXMiLCJmb3JFYWNoIiwiX2Rpc2giLCJkaXNoIiwiZmluZCIsImVsZW1lbnQiLCJpZCIsIm5hbWUiLCJwdXNoIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiKy9HQWVZOzJGQWZaLEtBQU0sQ0FBQ0EsTUFBTSxDQUFFLENBQUNDLGFBQUQsQ0FBZ0JDLElBQWhCLENBQVQsMkJBQWtDQyxPQUFPLENBQUMsYUFBRCxDQUF6QyxDQUFOLENBQ0EsS0FBTSxDQUFDQyxNQUFNLENBQUUsQ0FBQ0MsZ0JBQUQsQ0FBbUJDLGdCQUFuQixDQUFULDJCQUFpREgsT0FBTyxDQUFDLGdCQUFELENBQXhELENBQU4sQyx3QkFDQUEsT0FBTyxDQUFDLGlDQUFELENBQVAsQyx3QkFDQUEsT0FBTyxDQUFDLGdDQUFELENBQVAsQyx3QkFFQUksTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLGVBQUQsQ0FBa0JDLE9BQWxCLENBQTJCQyxTQUEzQixHQUF5QyxpREFFdERDLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkosZUFBaEIsRUFGc0Qsd0JBR3RERyxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JILE9BQWhCLEVBSHNELHdCQUl0REksS0FBSyxDQUFDRCxRQUFOLENBQWVGLFNBQWYsRUFKc0Qsd0JBTXRELE1BQU8sQ0FBQyxTQUFXLGlEQUNmLFNBQ0EsS0FBTUksQ0FBQUEsYUFBYSwyQkFBRyxLQUFNZCxDQUFBQSxhQUFhLENBQUNlLFFBQWQsQ0FBdUJQLGVBQXZCLENBQVQsQ0FBbkIsQ0FGZSx5QkFJZixHQUFHLENBQUNNLGFBQUosQ0FBbUIsMERBQU0sSUFBSVYsQ0FBQUEsZ0JBQUosQ0FBc0IseUJBQXdCSSxlQUFnQixpQkFBOUQsQ0FBTixDQUFxRixDQUF4RyxpQ0FDQSxLQUFNLENBQUNRLE1BQUQsNEJBQVdGLGFBQVgsQ0FBTixDQUdBLEdBQUlHLENBQUFBLE9BQU8sMkJBQUcsRUFBSCxDQUFYLENBUmUseUJBVWZQLFNBQVMsQ0FBQ1EsT0FBVixDQUFrQkMsS0FBSyxFQUFJLHlCQUN2QixLQUFNQyxDQUFBQSxJQUFJLDJCQUFHSixNQUFNLENBQUNLLElBQVAsQ0FBWUMsT0FBTyxFQUFJLHdEQUFBQSxDQUFBQSxPQUFPLENBQUNDLEVBQVIsR0FBZUosS0FBZixDQUFvQixDQUEzQyxDQUFILENBQVYsQ0FEdUIseUJBRXZCLEdBQUksTUFBT0MsQ0FBQUEsSUFBUCxHQUFnQixXQUFwQixDQUFpQyw0QkFDN0IsS0FBTSxDQUFDSSxJQUFELDRCQUFTSixJQUFULENBQU4sQ0FENkIseUJBRTdCSCxPQUFPLENBQUNRLElBQVIsQ0FBYUQsSUFBYixFQUNILENBSEQsaUNBSUgsQ0FORCxFQVZlLHlCQWlCZixTQWpCZSx5QkFrQmYsR0FBRyxDQUFDUCxPQUFPLENBQUNTLE1BQVosQ0FBb0IsMERBQU0sSUFBSXRCLENBQUFBLGdCQUFKLENBQXFCLHlCQUFyQixDQUFOLENBQXFELENBQXpFLGlDQWxCZSx5QkFvQmYsU0FwQmUseUJBcUJmLE1BQU9hLENBQUFBLE9BQVAsQ0FDSCxDQXRCTSxHQUFQLENBdUJILENBN0JEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge21vZGVsczoge0VzdGFibGlzaG1lbnQsIERpc2h9fSA9IHJlcXVpcmUoJ3FybWVudS1kYXRhJylcbmNvbnN0IHtlcnJvcnM6IHtVbmV4aXN0ZW5jZUVycm9yLCBDcmVkZW50aWFsc0Vycm9yfX0gPSByZXF1aXJlKCdxcm1lbnUtY29tbW9ucycpXG5yZXF1aXJlKCdxcm1lbnUtY29tbW9ucy9wb2x5ZmlsbHMvc3RyaW5nJylcbnJlcXVpcmUoJ3FybWVudS1jb21tb25zL3BvbHlmaWxscy9hcnJheScpXG5cbm1vZHVsZS5leHBvcnRzID0gKGVzdGFibGlzaG1lbnRJZCwgdGFibGVJZCwgZGlzaGVzSWRzKSA9PiB7XG4gICAgXG4gICAgU3RyaW5nLnZhbGlkYXRlKGVzdGFibGlzaG1lbnRJZClcbiAgICBTdHJpbmcudmFsaWRhdGUodGFibGVJZClcbiAgICBBcnJheS52YWxpZGF0ZShkaXNoZXNJZHMpXG5cbiAgICByZXR1cm4gKGFzeW5jKCkgPT4ge1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICBjb25zdCBlc3RhYmxpc2htZW50ID0gYXdhaXQgRXN0YWJsaXNobWVudC5maW5kQnlJZChlc3RhYmxpc2htZW50SWQpXG5cbiAgICAgICAgaWYoIWVzdGFibGlzaG1lbnQpIHRocm93IG5ldyBVbmV4aXN0ZW5jZUVycm9yKGBFc3RhYmxpc2htZW50IHdpdGggaWQgJHtlc3RhYmxpc2htZW50SWR9IGRvZXMgbm90IGV4aXN0YClcbiAgICAgICAgY29uc3Qge2Rpc2hlc30gPSBlc3RhYmxpc2htZW50XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgbGV0IF9kaXNoZXMgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGRpc2hlc0lkcy5mb3JFYWNoKF9kaXNoID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2ggPSBkaXNoZXMuZmluZChlbGVtZW50ID0+IGVsZW1lbnQuaWQgPT09IF9kaXNoKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkaXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHtuYW1lfSA9IGRpc2ggIFxuICAgICAgICAgICAgICAgIF9kaXNoZXMucHVzaChuYW1lKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgaWYoIV9kaXNoZXMubGVuZ3RoKSB0aHJvdyBuZXcgVW5leGlzdGVuY2VFcnJvcignTm8gZGlzaGVzIHdpdGggdGhpcyBpZHMnKVxuICAgICAgICBcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgcmV0dXJuIF9kaXNoZXNcbiAgICB9KSgpXG59Il19