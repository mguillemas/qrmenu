function cov_23ewxy8rm(){var path="/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-worker.spec.js";var hash="b3ea661a8aa3b34d44b8fcb7bb48e94080fdfb8a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-worker.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:51},end:{line:3,column:58}},"2":{start:{line:5,column:30},end:{line:5,column:65}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:40}},"6":{start:{line:9,column:48},end:{line:9,column:70}},"7":{start:{line:10,column:46},end:{line:10,column:71}},"8":{start:{line:11,column:15},end:{line:11,column:34}},"9":{start:{line:12,column:0},end:{line:64,column:2}},"10":{start:{line:13,column:4},end:{line:13,column:47}},"11":{start:{line:13,column:17},end:{line:13,column:46}},"12":{start:{line:17,column:4},end:{line:28,column:5}},"13":{start:{line:18,column:8},end:{line:27,column:36}},"14":{start:{line:20,column:12},end:{line:20,column:55}},"15":{start:{line:21,column:12},end:{line:21,column:32}},"16":{start:{line:22,column:12},end:{line:22,column:44}},"17":{start:{line:23,column:12},end:{line:23,column:44}},"18":{start:{line:25,column:12},end:{line:25,column:44}},"19":{start:{line:27,column:23},end:{line:27,column:35}},"20":{start:{line:30,column:4},end:{line:46,column:6}},"21":{start:{line:31,column:8},end:{line:34,column:9}},"22":{start:{line:32,column:12},end:{line:33,column:74}},"23":{start:{line:33,column:39},end:{line:33,column:73}},"24":{start:{line:36,column:8},end:{line:45,column:10}},"25":{start:{line:37,column:12},end:{line:41,column:14}},"26":{start:{line:40,column:16},end:{line:40,column:62}},"27":{start:{line:48,column:4},end:{line:59,column:6}},"28":{start:{line:49,column:32},end:{line:49,column:58}},"29":{start:{line:51,column:8},end:{line:58,column:14}},"30":{start:{line:52,column:26},end:{line:52,column:72}},"31":{start:{line:54,column:16},end:{line:54,column:38}},"32":{start:{line:56,column:16},end:{line:56,column:56}},"33":{start:{line:57,column:16},end:{line:57,column:105}},"34":{start:{line:61,column:4},end:{line:61,column:47}},"35":{start:{line:61,column:20},end:{line:61,column:46}},"36":{start:{line:63,column:4},end:{line:63,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:36},end:{line:12,column:37}},loc:{start:{line:12,column:42},end:{line:64,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:13,column:46}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:15},end:{line:17,column:16}},loc:{start:{line:18,column:8},end:{line:27,column:36}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:14},end:{line:19,column:15}},loc:{start:{line:19,column:20},end:{line:26,column:9}},line:19},"4":{name:"(anonymous_4)",decl:{start:{line:27,column:14},end:{line:27,column:15}},loc:{start:{line:27,column:23},end:{line:27,column:35}},line:27},"5":{name:"(anonymous_5)",decl:{start:{line:30,column:41},end:{line:30,column:42}},loc:{start:{line:30,column:47},end:{line:46,column:5}},line:30},"6":{name:"(anonymous_6)",decl:{start:{line:31,column:19},end:{line:31,column:20}},loc:{start:{line:32,column:12},end:{line:33,column:74}},line:32},"7":{name:"(anonymous_7)",decl:{start:{line:33,column:22},end:{line:33,column:23}},loc:{start:{line:33,column:39},end:{line:33,column:73}},line:33},"8":{name:"(anonymous_8)",decl:{start:{line:36,column:50},end:{line:36,column:51}},loc:{start:{line:36,column:56},end:{line:45,column:9}},line:36},"9":{name:"(anonymous_9)",decl:{start:{line:38,column:18},end:{line:38,column:19}},loc:{start:{line:38,column:36},end:{line:41,column:13}},line:38},"10":{name:"(anonymous_10)",decl:{start:{line:48,column:47},end:{line:48,column:48}},loc:{start:{line:48,column:53},end:{line:59,column:5}},line:48},"11":{name:"(anonymous_11)",decl:{start:{line:52,column:18},end:{line:52,column:19}},loc:{start:{line:52,column:24},end:{line:52,column:74}},line:52},"12":{name:"(anonymous_12)",decl:{start:{line:53,column:19},end:{line:53,column:20}},loc:{start:{line:53,column:28},end:{line:58,column:13}},line:53},"13":{name:"(anonymous_13)",decl:{start:{line:61,column:14},end:{line:61,column:15}},loc:{start:{line:61,column:20},end:{line:61,column:46}},line:61}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b3ea661a8aa3b34d44b8fcb7bb48e94080fdfb8a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_23ewxy8rm=function(){return actualCoverage;};}return actualCoverage;}cov_23ewxy8rm();cov_23ewxy8rm().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_23ewxy8rm().s[1]++,process);const retrieveEstablishment=(cov_23ewxy8rm().s[2]++,require('./retrieve-establishment'));const{random}=(cov_23ewxy8rm().s[3]++,Math);const{expect}=(cov_23ewxy8rm().s[4]++,require('chai'));cov_23ewxy8rm().s[5]++;require('qrmenu-commons/polyfills/json');const{mongoose,models:{Establishment}}=(cov_23ewxy8rm().s[6]++,require('qrmenu-data'));const{utils:{generateNIF:{generateNIF}}}=(cov_23ewxy8rm().s[7]++,require('qrmenu-commons'));const bcrypt=(cov_23ewxy8rm().s[8]++,require('bcryptjs'));cov_23ewxy8rm().s[9]++;describe('logic - retrieve worker',()=>{cov_23ewxy8rm().f[0]++;cov_23ewxy8rm().s[10]++;before(()=>{cov_23ewxy8rm().f[1]++;cov_23ewxy8rm().s[11]++;return mongoose.connect(MONGODB_URL);});let establishment,nif,email,password,establishmentId,hash;cov_23ewxy8rm().s[12]++;beforeEach(()=>{cov_23ewxy8rm().f[2]++;cov_23ewxy8rm().s[13]++;return Establishment.deleteMany().then(()=>{cov_23ewxy8rm().f[3]++;cov_23ewxy8rm().s[14]++;establishment=`establishment-${random()}`;cov_23ewxy8rm().s[15]++;nif=generateNIF();cov_23ewxy8rm().s[16]++;email=`e-${random()}@mail.com`;cov_23ewxy8rm().s[17]++;password=`password${random()}`;cov_23ewxy8rm().s[18]++;return bcrypt.hash(password,10);}).then(_hash=>{cov_23ewxy8rm().f[4]++;cov_23ewxy8rm().s[19]++;return hash=_hash;});});cov_23ewxy8rm().s[20]++;describe('when user already exists',()=>{cov_23ewxy8rm().f[5]++;cov_23ewxy8rm().s[21]++;beforeEach(()=>{cov_23ewxy8rm().f[6]++;cov_23ewxy8rm().s[22]++;return Establishment.create({establishment,nif,staff:[{email,password:hash}]}).then(establishment=>{cov_23ewxy8rm().f[7]++;cov_23ewxy8rm().s[23]++;return establishmentId=establishment.id;});});cov_23ewxy8rm().s[24]++;it('should succeed on correct worker id',()=>{cov_23ewxy8rm().f[8]++;cov_23ewxy8rm().s[25]++;retrieveEstablishment(establishmentId).then(_establishment=>{cov_23ewxy8rm().f[9]++;cov_23ewxy8rm().s[26]++;expect(_establishment).to.equal(establishment);});});});cov_23ewxy8rm().s[27]++;it('should fail when user does not exist',()=>{cov_23ewxy8rm().f[10]++;const establishmentId=(cov_23ewxy8rm().s[28]++,'5ed1204ee99ccf6fae798aef');cov_23ewxy8rm().s[29]++;return retrieveEstablishment(establishmentId).then(()=>{cov_23ewxy8rm().f[11]++;cov_23ewxy8rm().s[30]++;throw new Error('should not reach this point');}).catch(error=>{cov_23ewxy8rm().f[12]++;cov_23ewxy8rm().s[31]++;expect(error).to.exist;cov_23ewxy8rm().s[32]++;expect(error).to.be.an.instanceof(Error);cov_23ewxy8rm().s[33]++;expect(error.message).to.equal(`Establishment with id ${establishmentId} does not exist`);});});cov_23ewxy8rm().s[34]++;afterEach(()=>{cov_23ewxy8rm().f[13]++;cov_23ewxy8rm().s[35]++;return Establishment.deleteMany();});cov_23ewxy8rm().s[36]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXdvcmtlci5zcGVjLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJlbnYiLCJURVNUX01PTkdPREJfVVJMIiwiTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwicmV0cmlldmVFc3RhYmxpc2htZW50IiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiRXN0YWJsaXNobWVudCIsInV0aWxzIiwiZ2VuZXJhdGVOSUYiLCJiY3J5cHQiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJlc3RhYmxpc2htZW50IiwibmlmIiwiZW1haWwiLCJwYXNzd29yZCIsImVzdGFibGlzaG1lbnRJZCIsImhhc2giLCJiZWZvcmVFYWNoIiwiZGVsZXRlTWFueSIsInRoZW4iLCJfaGFzaCIsImNyZWF0ZSIsInN0YWZmIiwiaWQiLCJpdCIsIl9lc3RhYmxpc2htZW50IiwidG8iLCJlcXVhbCIsIkVycm9yIiwiY2F0Y2giLCJlcnJvciIsImV4aXN0IiwiYmUiLCJhbiIsImluc3RhbmNlb2YiLCJtZXNzYWdlIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoib21LQWVZO2dIQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFnQixDQUFFQyxXQUFwQixDQUFQLDBCQUE2Q0MsT0FBN0MsQ0FBTixDQUVBLEtBQU1DLENBQUFBLHFCQUFxQix5QkFBR04sT0FBTyxDQUFDLDBCQUFELENBQVYsQ0FBM0IsQ0FDQSxLQUFNLENBQUVPLE1BQUYsMEJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBRiwwQkFBYVQsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDLHVCQUNBQSxPQUFPLENBQUMsK0JBQUQsQ0FBUCxDQUNBLEtBQU0sQ0FBRVUsUUFBRixDQUFZQyxNQUFNLENBQUUsQ0FBRUMsYUFBRixD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RUFDSCxDQVBFLENBQVAsQ0FRSCxDQVhDLENBQUYsQ0FwQ3NDLHdCQWlEdENxQixTQUFTLENBQUMsSUFBTSx1REFBQWhDLENBQUFBLGFBQWEsQ0FBQ2MsVUFBZCxHQUEwQixDQUFqQyxDQUFULENBakRzQyx3QkFtRHRDbUIsS0FBSyxDQUFDbkMsUUFBUSxDQUFDb0MsVUFBVixDQUFMLENBQ0gsQ0FwRE8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXG5cbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkw6IE1PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcblxuY29uc3QgcmV0cmlldmVFc3RhYmxpc2htZW50ID0gcmVxdWlyZSgnLi9yZXRyaWV2ZS1lc3RhYmxpc2htZW50JylcbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXG5yZXF1aXJlKCdxcm1lbnUtY29tbW9ucy9wb2x5ZmlsbHMvanNvbicpXG5jb25zdCB7IG1vbmdvb3NlLCBtb2RlbHM6IHsgRXN0YWJsaXNobWVudCB9IH0gPSByZXF1aXJlKCdxcm1lbnUtZGF0YScpXG5jb25zdCB7dXRpbHM6IHtnZW5lcmF0ZU5JRjoge2dlbmVyYXRlTklGfX19ID0gcmVxdWlyZSgncXJtZW51LWNvbW1vbnMnKVxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxuZGVzY3JpYmUoJ2xvZ2ljIC0gcmV0cmlldmUgd29ya2VyJywgKCkgPT4ge1xuICAgIGJlZm9yZSgoKSA9PiBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJMKSlcblxuICAgIGxldCBlc3RhYmxpc2htZW50LCBuaWYsIGVtYWlsLCBwYXNzd29yZCwgZXN0YWJsaXNobWVudElkLCBoYXNoXG5cbiAgICBiZWZvcmVFYWNoKCgpID0+XG4gICAgICAgIEVzdGFibGlzaG1lbnQuZGVsZXRlTWFueSgpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGVzdGFibGlzaG1lbnQgPSBgZXN0YWJsaXNobWVudC0ke3JhbmRvbSgpfWBcbiAgICAgICAgICAgIG5pZiA9ICBnZW5lcmF0ZU5JRigpXG4gICAgICAgICAgICBlbWFpbCA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxuICAgICAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQke3JhbmRvbSgpfWBcblxuICAgICAgICAgICAgcmV0dXJuIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oX2hhc2ggPT4gaGFzaCA9IF9oYXNoKVxuICAgIClcblxuICAgIGRlc2NyaWJlKCd3aGVuIHVzZXIgYWxyZWFkeSBleGlzdHMnLCAoKSA9PiB7XG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT5cbiAgICAgICAgICAgIEVzdGFibGlzaG1lbnQuY3JlYXRlKHsgZXN0YWJsaXNobWVudCwgbmlmLCBzdGFmZjogW3tlbWFpbCwgcGFzc3dvcmQ6IGhhc2h9XSB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGVzdGFibGlzaG1lbnQgPT4gZXN0YWJsaXNobWVudElkID0gZXN0YWJsaXNobWVudC5pZClcbiAgICAgICAgKVxuXG4gICAgICAgIGl0KCdzaG91bGQgc3VjY2VlZCBvbiBjb3JyZWN0IHdvcmtlciBpZCcsICgpID0+IHtcbiAgICAgICAgICAgIHJldHJpZXZlRXN0YWJsaXNobWVudChlc3RhYmxpc2htZW50SWQpXG4gICAgICAgICAgICAudGhlbihfZXN0YWJsaXNobWVudCA9PiB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZXhwZWN0KF9lc3RhYmxpc2htZW50KS50by5lcXVhbChlc3RhYmxpc2htZW50KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBmYWlsIHdoZW4gdXNlciBkb2VzIG5vdCBleGlzdCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgZXN0YWJsaXNobWVudElkID0gJzVlZDEyMDRlZTk5Y2NmNmZhZTc5OGFlZidcblxuICAgICAgICByZXR1cm4gcmV0cmlldmVFc3RhYmxpc2htZW50KGVzdGFibGlzaG1lbnRJZClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKSB9KVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XG5cbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmJlLmFuLmluc3RhbmNlb2YoRXJyb3IpXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGBFc3RhYmxpc2htZW50IHdpdGggaWQgJHtlc3RhYmxpc2htZW50SWR9IGRvZXMgbm90IGV4aXN0YClcbiAgICAgICAgICAgIH0pXG4gICAgfSlcblxuICAgIGFmdGVyRWFjaCgoKSA9PiBFc3RhYmxpc2htZW50LmRlbGV0ZU1hbnkoKSlcblxuICAgIGFmdGVyKG1vbmdvb3NlLmRpc2Nvbm5lY3QpXG59KSJdfQ==