function cov_1wngzkexq(){var path="/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-tables.spec.js";var hash="57130c64a7e3a6a674adc6ebfa9b7cfd0e4aa230";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-tables.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:2,column:47},end:{line:2,column:54}},"2":{start:{line:3,column:46},end:{line:3,column:68}},"3":{start:{line:4,column:23},end:{line:4,column:51}},"4":{start:{line:5,column:17},end:{line:5,column:21}},"5":{start:{line:6,column:15},end:{line:6,column:34}},"6":{start:{line:7,column:17},end:{line:7,column:32}},"7":{start:{line:8,column:46},end:{line:8,column:71}},"8":{start:{line:9,column:14},end:{line:9,column:57}},"9":{start:{line:10,column:19},end:{line:10,column:35}},"10":{start:{line:11,column:29},end:{line:11,column:61}},"11":{start:{line:14,column:0},end:{line:89,column:2}},"12":{start:{line:16,column:3},end:{line:16,column:46}},"13":{start:{line:16,column:16},end:{line:16,column:45}},"14":{start:{line:20,column:4},end:{line:30,column:6}},"15":{start:{line:21,column:8},end:{line:21,column:40}},"16":{start:{line:23,column:8},end:{line:23,column:50}},"17":{start:{line:24,column:8},end:{line:24,column:32}},"18":{start:{line:25,column:8},end:{line:25,column:43}},"19":{start:{line:26,column:8},end:{line:26,column:41}},"20":{start:{line:28,column:8},end:{line:28,column:39}},"21":{start:{line:33,column:4},end:{line:83,column:6}},"22":{start:{line:34,column:8},end:{line:41,column:10}},"23":{start:{line:35,column:26},end:{line:35,column:57}},"24":{start:{line:36,column:12},end:{line:36,column:24}},"25":{start:{line:37,column:35},end:{line:37,column:152}},"26":{start:{line:38,column:12},end:{line:38,column:47}},"27":{start:{line:39,column:12},end:{line:39,column:49}},"28":{start:{line:40,column:12},end:{line:40,column:49}},"29":{start:{line:43,column:8},end:{line:52,column:10}},"30":{start:{line:45,column:28},end:{line:45,column:75}},"31":{start:{line:47,column:12},end:{line:47,column:45}},"32":{start:{line:48,column:12},end:{line:48,column:39}},"33":{start:{line:49,column:12},end:{line:49,column:52}},"34":{start:{line:50,column:12},end:{line:50,column:51}},"35":{start:{line:54,column:8},end:{line:67,column:10}},"36":{start:{line:57,column:12},end:{line:65,column:13}},"37":{start:{line:58,column:16},end:{line:58,column:74}},"38":{start:{line:59,column:16},end:{line:59,column:62}},"39":{start:{line:61,column:16},end:{line:61,column:24}},"40":{start:{line:62,column:16},end:{line:62,column:38}},"41":{start:{line:63,column:16},end:{line:63,column:67}},"42":{start:{line:64,column:16},end:{line:64,column:111}},"43":{start:{line:69,column:8},end:{line:82,column:10}},"44":{start:{line:72,column:12},end:{line:80,column:13}},"45":{start:{line:73,column:16},end:{line:73,column:81}},"46":{start:{line:74,column:16},end:{line:74,column:62}},"47":{start:{line:76,column:16},end:{line:76,column:24}},"48":{start:{line:77,column:16},end:{line:77,column:38}},"49":{start:{line:78,column:16},end:{line:78,column:67}},"50":{start:{line:79,column:16},end:{line:79,column:104}},"51":{start:{line:85,column:4},end:{line:88,column:6}},"52":{start:{line:86,column:8},end:{line:86,column:40}},"53":{start:{line:87,column:8},end:{line:87,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:14,column:41},end:{line:14,column:42}},loc:{start:{line:14,column:47},end:{line:89,column:1}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:10},end:{line:16,column:11}},loc:{start:{line:16,column:16},end:{line:16,column:45}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:15},end:{line:20,column:16}},loc:{start:{line:20,column:26},end:{line:30,column:5}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:33,column:17},end:{line:33,column:18}},loc:{start:{line:33,column:23},end:{line:83,column:5}},line:33},"4":{name:"(anonymous_4)",decl:{start:{line:34,column:19},end:{line:34,column:20}},loc:{start:{line:34,column:30},end:{line:41,column:9}},line:34},"5":{name:"(anonymous_5)",decl:{start:{line:43,column:74},end:{line:43,column:75}},loc:{start:{line:43,column:85},end:{line:52,column:9}},line:43},"6":{name:"(anonymous_6)",decl:{start:{line:54,column:51},end:{line:54,column:52}},loc:{start:{line:54,column:62},end:{line:67,column:9}},line:54},"7":{name:"(anonymous_7)",decl:{start:{line:69,column:45},end:{line:69,column:46}},loc:{start:{line:69,column:56},end:{line:82,column:9}},line:69},"8":{name:"(anonymous_8)",decl:{start:{line:85,column:10},end:{line:85,column:11}},loc:{start:{line:85,column:21},end:{line:88,column:5}},line:85}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"57130c64a7e3a6a674adc6ebfa9b7cfd0e4aa230"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1wngzkexq=function(){return actualCoverage;};}return actualCoverage;}cov_1wngzkexq();cov_1wngzkexq().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_1wngzkexq().s[1]++,process);const{mongoose,models:{Establishment}}=(cov_1wngzkexq().s[2]++,require('qrmenu-data'));const retrieveTables=(cov_1wngzkexq().s[3]++,require('./retrieve-tables'));const{random}=(cov_1wngzkexq().s[4]++,Math);const bcrypt=(cov_1wngzkexq().s[5]++,require('bcryptjs'));const{expect}=(cov_1wngzkexq().s[6]++,require('chai'));const{utils:{generateNIF:{generateNIF}}}=(cov_1wngzkexq().s[7]++,require('qrmenu-commons'));const table=(cov_1wngzkexq().s[8]++,require('qrmenu-data/models/schemas/table'));const{before}=(cov_1wngzkexq().s[9]++,require('mocha'));const{UnexistenceError}=(cov_1wngzkexq().s[10]++,require('qrmenu-commons/errors'));cov_1wngzkexq().s[11]++;describe('server-logic retrieve-tables',()=>{cov_1wngzkexq().f[0]++;cov_1wngzkexq().s[12]++;before(()=>{cov_1wngzkexq().f[1]++;cov_1wngzkexq().s[13]++;return mongoose.connect(MONGODB_URL);});let establishment,nif,email,password,table,hash,establishmentId,workerId,tableId;cov_1wngzkexq().s[14]++;beforeEach(async()=>{cov_1wngzkexq().f[2]++;cov_1wngzkexq().s[15]++;await Establishment.deleteMany();cov_1wngzkexq().s[16]++;establishment=`establisment-${random()}`;cov_1wngzkexq().s[17]++;nif=`${generateNIF()}`;cov_1wngzkexq().s[18]++;email=`mail-${random()}@mail.com`;cov_1wngzkexq().s[19]++;password=`password-${random()}`;cov_1wngzkexq().s[20]++;table=Math.floor(random()*10);});cov_1wngzkexq().s[21]++;describe('',()=>{cov_1wngzkexq().f[3]++;cov_1wngzkexq().s[22]++;beforeEach(async()=>{cov_1wngzkexq().f[4]++;const _hash=(cov_1wngzkexq().s[23]++,await bcrypt.hash(password,10));cov_1wngzkexq().s[24]++;hash=_hash;const _establishment=(cov_1wngzkexq().s[25]++,await Establishment.create({establishment,nif,staff:[{email,role:'owner',password:hash}],tables:[{table}]}));cov_1wngzkexq().s[26]++;establishmentId=_establishment.id;cov_1wngzkexq().s[27]++;workerId=_establishment.staff[0].id;cov_1wngzkexq().s[28]++;tableId=_establishment.tables[0].id;});cov_1wngzkexq().s[29]++;it('should succed on retrieve all tables from the establishment',async()=>{cov_1wngzkexq().f[5]++;const _tables=(cov_1wngzkexq().s[30]++,await retrieveTables(establishmentId,workerId));cov_1wngzkexq().s[31]++;expect(_tables).to.be.an('array');cov_1wngzkexq().s[32]++;expect(_tables[0]).to.exist;cov_1wngzkexq().s[33]++;expect(_tables[0].table).to.equal(table);cov_1wngzkexq().s[34]++;expect(_tables[0].id).to.equal(tableId);});cov_1wngzkexq().s[35]++;it('should fail on wrong establisment Id',async()=>{cov_1wngzkexq().f[6]++;cov_1wngzkexq().s[36]++;try{cov_1wngzkexq().s[37]++;await retrieveTables("5eedfc3256012e6c3dbb7cbe",workerId);cov_1wngzkexq().s[38]++;throw new Error('Should not reach this point');}catch(error){cov_1wngzkexq().s[39]++;debugger;cov_1wngzkexq().s[40]++;expect(error).to.exist;cov_1wngzkexq().s[41]++;expect(error).to.be.an.instanceOf(UnexistenceError);cov_1wngzkexq().s[42]++;expect(error.message).to.equal("Establishment with id 5eedfc3256012e6c3dbb7cbe does not exist");}});cov_1wngzkexq().s[43]++;it('should fail on wrong worker Id',async()=>{cov_1wngzkexq().f[7]++;cov_1wngzkexq().s[44]++;try{cov_1wngzkexq().s[45]++;await retrieveTables(establishmentId,"5eedfc3256012e6c3dbb7cbe");cov_1wngzkexq().s[46]++;throw new Error('Should not reach this point');}catch(error){cov_1wngzkexq().s[47]++;debugger;cov_1wngzkexq().s[48]++;expect(error).to.exist;cov_1wngzkexq().s[49]++;expect(error).to.be.an.instanceOf(UnexistenceError);cov_1wngzkexq().s[50]++;expect(error.message).to.equal("Worker with id 5eedfc3256012e6c3dbb7cbe does not exist");}});});cov_1wngzkexq().s[51]++;after(async()=>{cov_1wngzkexq().f[8]++;cov_1wngzkexq().s[52]++;await Establishment.deleteMany();cov_1wngzkexq().s[53]++;await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXRhYmxlcy5zcGVjLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJlbnYiLCJURVNUX01PTkdPREJfVVJMIiwiTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJFc3RhYmxpc2htZW50IiwicmV0cmlldmVUYWJsZXMiLCJyYW5kb20iLCJNYXRoIiwiYmNyeXB0IiwiZXhwZWN0IiwidXRpbHMiLCJnZW5lcmF0ZU5JRiIsInRhYmxlIiwiYmVmb3JlIiwiVW5leGlzdGVuY2VFcnJvciIsImRlc2NyaWJlIiwiY29ubmVjdCIsImVzdGFibGlzaG1lbnQiLCJuaWYiLCJlbWFpbCIsInBhc3N3b3JkIiwiaGFzaCIsImVzdGFibGlzaG1lbnRJZCIsIndvcmtlcklkIiwidGFibGVJZCIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwiZmxvb3IiLCJfaGFzaCIsIl9lc3RhYmxpc2htZW50IiwiY3JlYXRlIiwic3RhZmYiLCJyb2xlIiwidGFibGVzIiwiaWQiLCJpdCIsIl90YWJsZXMiLCJ0byIsImJlIiwiYW4iLCJleGlzdCIsImVxdWFsIiwiRXJyb3IiLCJlcnJvciIsImluc3RhbmNlT2YiLCJtZXNzYWdlIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiODRLQWVZO2dIQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUNBLEtBQU0sQ0FBQ0MsR0FBRyxDQUFFLENBQUNDLGdCQUFnQixDQUFFQyxXQUFuQixDQUFOLDBCQUF5Q0MsT0FBekMsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsUUFBRixDQUFZQyxNQUFNLENBQUUsQ0FBQ0MsYUFBRCxDQUFwQiwwQkFBd0NSLE9BQU8sQ0FBQyxhQUFELENBQS9DLENBQU4sQ0FDQSxLQUFNUyxDQUFBQSxjQUFjLHlCQUFHVCxPQUFPLENBQUMsbUJBQUQsQ0FBVixDQUFwQixDQUNBLEtBQU0sQ0FBQ1UsTUFBRCwwQkFBV0MsSUFBWCxDQUFO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QUNILENBQUMsTUFBT0MsS0FBUCxDQUFjLHlCQUNaLFNBRFksd0JBRVpsQyxNQUFNLENBQUNrQyxLQUFELENBQU4sQ0FBY04sRUFBZCxDQUFpQkcsS0FBakIsQ0FGWSx3QkFHWi9CLE1BQU0sQ0FBQ2tDLEtBQUQsQ0FBTixDQUFjTixFQUFkLENBQWlCQyxFQUFqQixDQUFvQkMsRUFBcEIsQ0FBdUJLLFVBQXZCLENBQWtDOUIsZ0JBQWxDLEVBSFksd0JBSVpMLE1BQU0sQ0FBQ2tDLEtBQUssQ0FBQ0UsT0FBUCxDQUFOLENBQXNCUixFQUF0QixDQUF5QkksS0FBekIsQ0FBK0Isd0RBQS9CLEVBQ0gsQ0FFSixDQWJDLENBQUYsQ0FjSCxDQWxETyxDQUFSLENBbkIyQyx3QkF1RTNDSyxLQUFLLENBQUMsU0FBVyxnREFDYixLQUFNMUMsQ0FBQUEsYUFBYSxDQUFDc0IsVUFBZCxFQUFOLENBRGEsd0JBRWIsS0FBTXhCLENBQUFBLFFBQVEsQ0FBQzZDLFVBQVQsRUFBTixDQUNILENBSEksQ0FBTCxDQUlILENBM0VPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuY29uc3Qge2Vudjoge1RFU1RfTU9OR09EQl9VUkw6IE1PTkdPREJfVVJMfX0gPSBwcm9jZXNzXG5jb25zdCB7IG1vbmdvb3NlLCBtb2RlbHM6IHtFc3RhYmxpc2htZW50fSB9ID0gcmVxdWlyZSgncXJtZW51LWRhdGEnKVxuY29uc3QgcmV0cmlldmVUYWJsZXMgPSByZXF1aXJlKCcuL3JldHJpZXZlLXRhYmxlcycpXG5jb25zdCB7cmFuZG9tfSA9IE1hdGhcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcbmNvbnN0IHtleHBlY3R9ID0gcmVxdWlyZSgnY2hhaScpXG5jb25zdCB7dXRpbHM6IHtnZW5lcmF0ZU5JRjoge2dlbmVyYXRlTklGfX19ID0gcmVxdWlyZSgncXJtZW51LWNvbW1vbnMnKVxuY29uc3QgdGFibGUgPSByZXF1aXJlKCdxcm1lbnUtZGF0YS9tb2RlbHMvc2NoZW1hcy90YWJsZScpXG5jb25zdCB7IGJlZm9yZSB9ID0gcmVxdWlyZSgnbW9jaGEnKVxuY29uc3QgeyBVbmV4aXN0ZW5jZUVycm9yIH0gPSByZXF1aXJlKCdxcm1lbnUtY29tbW9ucy9lcnJvcnMnKVxuXG5cbmRlc2NyaWJlKCdzZXJ2ZXItbG9naWMgcmV0cmlldmUtdGFibGVzJywgKCkgPT4ge1xuXG4gICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXG5cbiAgICBsZXQgZXN0YWJsaXNobWVudCwgbmlmLCBlbWFpbCwgcGFzc3dvcmQsIHRhYmxlLCBoYXNoLCBlc3RhYmxpc2htZW50SWQsIHdvcmtlcklkLCB0YWJsZUlkXG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jKCkgPT4ge1xuICAgICAgICBhd2FpdCBFc3RhYmxpc2htZW50LmRlbGV0ZU1hbnkoKVxuXG4gICAgICAgIGVzdGFibGlzaG1lbnQgPSBgZXN0YWJsaXNtZW50LSR7cmFuZG9tKCl9YFxuICAgICAgICBuaWYgPSBgJHtnZW5lcmF0ZU5JRigpfWBcbiAgICAgICAgZW1haWwgPSBgbWFpbC0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgdGFibGUgPSBNYXRoLmZsb29yKHJhbmRvbSgpKjEwKVxuXG4gICAgfSlcblxuXG4gICAgZGVzY3JpYmUoJycsICgpID0+IHtcbiAgICAgICAgYmVmb3JlRWFjaChhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuICAgICAgICAgICAgaGFzaCA9IF9oYXNoXG4gICAgICAgICAgICBjb25zdCBfZXN0YWJsaXNobWVudCA9IGF3YWl0IEVzdGFibGlzaG1lbnQuY3JlYXRlKHtlc3RhYmxpc2htZW50LCBuaWYsIHN0YWZmOiBbe2VtYWlsLCByb2xlOiAnb3duZXInLCBwYXNzd29yZDogaGFzaCB9XSwgdGFibGVzOiBbe3RhYmxlfV19KVxuICAgICAgICAgICAgZXN0YWJsaXNobWVudElkID0gX2VzdGFibGlzaG1lbnQuaWQgXG4gICAgICAgICAgICB3b3JrZXJJZCA9IF9lc3RhYmxpc2htZW50LnN0YWZmWzBdLmlkIFxuICAgICAgICAgICAgdGFibGVJZCA9IF9lc3RhYmxpc2htZW50LnRhYmxlc1swXS5pZFxuICAgICAgICB9KVxuXG4gICAgICAgIGl0KCdzaG91bGQgc3VjY2VkIG9uIHJldHJpZXZlIGFsbCB0YWJsZXMgZnJvbSB0aGUgZXN0YWJsaXNobWVudCcsIGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBfdGFibGVzID0gYXdhaXQgcmV0cmlldmVUYWJsZXMoZXN0YWJsaXNobWVudElkLCB3b3JrZXJJZClcblxuICAgICAgICAgICAgZXhwZWN0KF90YWJsZXMpLnRvLmJlLmFuKCdhcnJheScpXG4gICAgICAgICAgICBleHBlY3QoX3RhYmxlc1swXSkudG8uZXhpc3RcbiAgICAgICAgICAgIGV4cGVjdChfdGFibGVzWzBdLnRhYmxlKS50by5lcXVhbCh0YWJsZSlcbiAgICAgICAgICAgIGV4cGVjdChfdGFibGVzWzBdLmlkKS50by5lcXVhbCh0YWJsZUlkKVxuICAgICAgICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiB3cm9uZyBlc3RhYmxpc21lbnQgSWQnLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCByZXRyaWV2ZVRhYmxlcyhcIjVlZWRmYzMyNTYwMTJlNmMzZGJiN2NiZVwiLCB3b3JrZXJJZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uYmUuYW4uaW5zdGFuY2VPZihVbmV4aXN0ZW5jZUVycm9yKVxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcXVhbChcIkVzdGFibGlzaG1lbnQgd2l0aCBpZCA1ZWVkZmMzMjU2MDEyZTZjM2RiYjdjYmUgZG9lcyBub3QgZXhpc3RcIilcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcblxuICAgICAgICB9KVxuXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiB3cm9uZyB3b3JrZXIgSWQnLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCByZXRyaWV2ZVRhYmxlcyhlc3RhYmxpc2htZW50SWQsIFwiNWVlZGZjMzI1NjAxMmU2YzNkYmI3Y2JlXCIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmJlLmFuLmluc3RhbmNlT2YoVW5leGlzdGVuY2VFcnJvcilcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoXCJXb3JrZXIgd2l0aCBpZCA1ZWVkZmMzMjU2MDEyZTZjM2RiYjdjYmUgZG9lcyBub3QgZXhpc3RcIilcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcblxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBhZnRlcihhc3luYygpID0+IHtcbiAgICAgICAgYXdhaXQgRXN0YWJsaXNobWVudC5kZWxldGVNYW55KClcbiAgICAgICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpXG4gICAgfSlcbn0pIl19