function cov_26lsrzzrsr(){var path="/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-order-dishes.js";var hash="fce6150552eeb37631056dc0d9e632b2dcc2eed3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/retrieve-order-dishes.js",statementMap:{"0":{start:{line:1,column:40},end:{line:1,column:62}},"1":{start:{line:2,column:55},end:{line:2,column:80}},"2":{start:{line:3,column:0},end:{line:3,column:42}},"3":{start:{line:4,column:0},end:{line:4,column:41}},"4":{start:{line:11,column:0},end:{line:40,column:1}},"5":{start:{line:13,column:4},end:{line:13,column:36}},"6":{start:{line:14,column:4},end:{line:14,column:28}},"7":{start:{line:15,column:4},end:{line:15,column:29}},"8":{start:{line:17,column:4},end:{line:39,column:8}},"9":{start:{line:19,column:30},end:{line:19,column:75}},"10":{start:{line:21,column:8},end:{line:21,column:112}},"11":{start:{line:21,column:27},end:{line:21,column:112}},"12":{start:{line:22,column:25},end:{line:22,column:38}},"13":{start:{line:25,column:22},end:{line:25,column:24}},"14":{start:{line:27,column:8},end:{line:33,column:11}},"15":{start:{line:28,column:25},end:{line:28,column:69}},"16":{start:{line:28,column:48},end:{line:28,column:68}},"17":{start:{line:29,column:12},end:{line:32,column:13}},"18":{start:{line:30,column:31},end:{line:30,column:35}},"19":{start:{line:31,column:16},end:{line:31,column:34}},"20":{start:{line:35,column:8},end:{line:35,column:81}},"21":{start:{line:35,column:28},end:{line:35,column:81}},"22":{start:{line:38,column:8},end:{line:38,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:58},end:{line:40,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:12},end:{line:17,column:13}},loc:{start:{line:17,column:23},end:{line:39,column:5}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:26},end:{line:27,column:27}},loc:{start:{line:27,column:35},end:{line:33,column:9}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:37},end:{line:28,column:38}},loc:{start:{line:28,column:48},end:{line:28,column:68}},line:28}},branchMap:{"0":{loc:{start:{line:21,column:8},end:{line:21,column:112}},type:"if",locations:[{start:{line:21,column:8},end:{line:21,column:112}},{start:{line:21,column:8},end:{line:21,column:112}}],line:21},"1":{loc:{start:{line:29,column:12},end:{line:32,column:13}},type:"if",locations:[{start:{line:29,column:12},end:{line:32,column:13}},{start:{line:29,column:12},end:{line:32,column:13}}],line:29},"2":{loc:{start:{line:35,column:8},end:{line:35,column:81}},type:"if",locations:[{start:{line:35,column:8},end:{line:35,column:81}},{start:{line:35,column:8},end:{line:35,column:81}}],line:35}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce6150552eeb37631056dc0d9e632b2dcc2eed3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_26lsrzzrsr=function(){return actualCoverage;};}return actualCoverage;}cov_26lsrzzrsr();const{models:{Establishment,Dish}}=(cov_26lsrzzrsr().s[0]++,require('qrmenu-data'));const{errors:{UnexistenceError,CredentialsError}}=(cov_26lsrzzrsr().s[1]++,require('qrmenu-commons'));cov_26lsrzzrsr().s[2]++;require('qrmenu-commons/polyfills/string');cov_26lsrzzrsr().s[3]++;require('qrmenu-commons/polyfills/array');/**
 * 
 * @param {string} establishmentId id of the establishment
 * @param {string} tableId id of the table
 * @param {string} dishesIds multiple dishes id's
 */cov_26lsrzzrsr().s[4]++;module.exports=(establishmentId,tableId,dishesIds)=>{cov_26lsrzzrsr().f[0]++;cov_26lsrzzrsr().s[5]++;String.validate(establishmentId);cov_26lsrzzrsr().s[6]++;String.validate(tableId);cov_26lsrzzrsr().s[7]++;Array.validate(dishesIds);cov_26lsrzzrsr().s[8]++;return(async()=>{cov_26lsrzzrsr().f[1]++;const establishment=(cov_26lsrzzrsr().s[9]++,await Establishment.findById(establishmentId));cov_26lsrzzrsr().s[10]++;if(!establishment){cov_26lsrzzrsr().b[0][0]++;cov_26lsrzzrsr().s[11]++;throw new UnexistenceError(`Establishment with id ${establishmentId} does not exist`);}else{cov_26lsrzzrsr().b[0][1]++;}const{dishes}=(cov_26lsrzzrsr().s[12]++,establishment);let _dishes=(cov_26lsrzzrsr().s[13]++,[]);cov_26lsrzzrsr().s[14]++;dishesIds.forEach(_dish=>{cov_26lsrzzrsr().f[2]++;const dish=(cov_26lsrzzrsr().s[15]++,dishes.find(element=>{cov_26lsrzzrsr().f[3]++;cov_26lsrzzrsr().s[16]++;return element.id===_dish;}));cov_26lsrzzrsr().s[17]++;if(typeof dish!=='undefined'){cov_26lsrzzrsr().b[1][0]++;const{name}=(cov_26lsrzzrsr().s[18]++,dish);cov_26lsrzzrsr().s[19]++;_dishes.push(name);}else{cov_26lsrzzrsr().b[1][1]++;}});cov_26lsrzzrsr().s[20]++;if(!_dishes.length){cov_26lsrzzrsr().b[2][0]++;cov_26lsrzzrsr().s[21]++;throw new UnexistenceError('No dishes with this ids');}else{cov_26lsrzzrsr().b[2][1]++;}cov_26lsrzzrsr().s[22]++;return _dishes;})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLW9yZGVyLWRpc2hlcy5qcyJdLCJuYW1lcyI6WyJtb2RlbHMiLCJFc3RhYmxpc2htZW50IiwiRGlzaCIsInJlcXVpcmUiLCJlcnJvcnMiLCJVbmV4aXN0ZW5jZUVycm9yIiwiQ3JlZGVudGlhbHNFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJlc3RhYmxpc2htZW50SWQiLCJ0YWJsZUlkIiwiZGlzaGVzSWRzIiwiU3RyaW5nIiwidmFsaWRhdGUiLCJBcnJheSIsImVzdGFibGlzaG1lbnQiLCJmaW5kQnlJZCIsImRpc2hlcyIsIl9kaXNoZXMiLCJmb3JFYWNoIiwiX2Rpc2giLCJkaXNoIiwiZmluZCIsImVsZW1lbnQiLCJpZCIsIm5hbWUiLCJwdXNoIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiMjBHQWVZOzJGQWZaLEtBQU0sQ0FBQ0EsTUFBTSxDQUFFLENBQUNDLGFBQUQsQ0FBZ0JDLElBQWhCLENBQVQsMkJBQWtDQyxPQUFPLENBQUMsYUFBRCxDQUF6QyxDQUFOLENBQ0EsS0FBTSxDQUFDQyxNQUFNLENBQUUsQ0FBQ0MsZ0JBQUQsQ0FBbUJDLGdCQUFuQixDQUFULDJCQUFpREgsT0FBTyxDQUFDLGdCQUFELENBQXhELENBQU4sQyx3QkFDQUEsT0FBTyxDQUFDLGlDQUFELENBQVAsQyx3QkFDQUEsT0FBTyxDQUFDLGdDQUFELENBQVAsQ0FDQTs7Ozs7MkJBTUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFDQyxlQUFELENBQWtCQyxPQUFsQixDQUEyQkMsU0FBM0IsR0FBeUMsaURBRXREQyxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JKLGVBQWhCLEVBRnNELHdCQUd0REcsTUFBTSxDQUFDQyxRQUFQLENBQWdCSCxPQUFoQixFQUhzRCx3QkFJdERJLEtBQUssQ0FBQ0QsUUFBTixDQUFlRixTQUFmLEVBSnNELHdCQU10RCxNQUFPLENBQUMsU0FBVyx5QkFFZixLQUFNSSxDQUFBQSxhQUFhLDBCQUFHLEtBQU1kLENBQUFBLGFBQWEsQ0FBQ2UsUUFBZCxDQUF1QlAsZUFBdkIsQ0FBVCxDQUFuQixDQUZlLHlCQUlmLEdBQUcsQ0FBQ00sYUFBSixDQUFtQiwwREFBTSxJQUFJVixDQUFBQSxnQkFBSixDQUFzQix5QkFBd0JJLGVBQWdCLGlCQUE5RCxDQUFOLENBQXFGLENBQXhHLGlDQUNBLEtBQU0sQ0FBQ1EsTUFBRCw0QkFBV0YsYUFBWCxDQUFOLENBR0EsR0FBSUcsQ0FBQUEsT0FBTywyQkFBRyxFQUFILENBQVgsQ0FSZSx5QkFVZlAsU0FBUyxDQUFDUSxPQUFWLENBQWtCQyxLQUFLLEVBQUkseUJBQ3ZCLEtBQU1DLENBQUFBLElBQUksMkJBQUdKLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZQyxPQUFPLEVBQUksd0RBQUFBLENBQUFBLE9BQU8sQ0FBQ0MsRUFBUixHQUFlSixLQUFmLENBQW9CLENBQTNDLENBQUgsQ0FBVixDQUR1Qix5QkFFdkIsR0FBSSxNQUFPQyxDQUFBQSxJQUFQLEdBQWdCLFdBQXBCLENBQWlDLDRCQUM3QixLQUFNLENBQUNJLElBQUQsNEJBQVNKLElBQVQsQ0FBTixDQUQ2Qix5QkFFN0JILE9BQU8sQ0FBQ1EsSUFBUixDQUFhRCxJQUFiLEVBQ0gsQ0FIRCxpQ0FJSCxDQU5ELEVBVmUseUJBa0JmLEdBQUcsQ0FBQ1AsT0FBTyxDQUFDUyxNQUFaLENBQW9CLDBEQUFNLElBQUl0QixDQUFBQSxnQkFBSixDQUFxQix5QkFBckIsQ0FBTixDQUFxRCxDQUF6RSxpQ0FsQmUseUJBcUJmLE1BQU9hLENBQUFBLE9BQVAsQ0FDSCxDQXRCTSxHQUFQLENBdUJILENBN0JEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge21vZGVsczoge0VzdGFibGlzaG1lbnQsIERpc2h9fSA9IHJlcXVpcmUoJ3FybWVudS1kYXRhJylcbmNvbnN0IHtlcnJvcnM6IHtVbmV4aXN0ZW5jZUVycm9yLCBDcmVkZW50aWFsc0Vycm9yfX0gPSByZXF1aXJlKCdxcm1lbnUtY29tbW9ucycpXG5yZXF1aXJlKCdxcm1lbnUtY29tbW9ucy9wb2x5ZmlsbHMvc3RyaW5nJylcbnJlcXVpcmUoJ3FybWVudS1jb21tb25zL3BvbHlmaWxscy9hcnJheScpXG4vKipcbiAqIFxuICogQHBhcmFtIHtzdHJpbmd9IGVzdGFibGlzaG1lbnRJZCBpZCBvZiB0aGUgZXN0YWJsaXNobWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhYmxlSWQgaWQgb2YgdGhlIHRhYmxlXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzaGVzSWRzIG11bHRpcGxlIGRpc2hlcyBpZCdzXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gKGVzdGFibGlzaG1lbnRJZCwgdGFibGVJZCwgZGlzaGVzSWRzKSA9PiB7XG4gICAgXG4gICAgU3RyaW5nLnZhbGlkYXRlKGVzdGFibGlzaG1lbnRJZClcbiAgICBTdHJpbmcudmFsaWRhdGUodGFibGVJZClcbiAgICBBcnJheS52YWxpZGF0ZShkaXNoZXNJZHMpXG5cbiAgICByZXR1cm4gKGFzeW5jKCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXN0YWJsaXNobWVudCA9IGF3YWl0IEVzdGFibGlzaG1lbnQuZmluZEJ5SWQoZXN0YWJsaXNobWVudElkKVxuXG4gICAgICAgIGlmKCFlc3RhYmxpc2htZW50KSB0aHJvdyBuZXcgVW5leGlzdGVuY2VFcnJvcihgRXN0YWJsaXNobWVudCB3aXRoIGlkICR7ZXN0YWJsaXNobWVudElkfSBkb2VzIG5vdCBleGlzdGApXG4gICAgICAgIGNvbnN0IHtkaXNoZXN9ID0gZXN0YWJsaXNobWVudFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGxldCBfZGlzaGVzID0gW107XG4gICAgICAgIFxuICAgICAgICBkaXNoZXNJZHMuZm9yRWFjaChfZGlzaCA9PiB7XG4gICAgICAgICAgICBjb25zdCBkaXNoID0gZGlzaGVzLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LmlkID09PSBfZGlzaClcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGlzaCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7bmFtZX0gPSBkaXNoICBcbiAgICAgICAgICAgICAgICBfZGlzaGVzLnB1c2gobmFtZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZighX2Rpc2hlcy5sZW5ndGgpIHRocm93IG5ldyBVbmV4aXN0ZW5jZUVycm9yKCdObyBkaXNoZXMgd2l0aCB0aGlzIGlkcycpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIF9kaXNoZXNcbiAgICB9KSgpXG59Il19