function cov_2djzlg1c1c(){var path="/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/assign-num-of-tables.spec.js";var hash="abd7721e66ccfe8b39b73d7ee6975e8ccd0a14cd";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-server-logic/assign-num-of-tables.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:2,column:47},end:{line:2,column:54}},"2":{start:{line:3,column:46},end:{line:3,column:68}},"3":{start:{line:4,column:46},end:{line:4,column:71}},"4":{start:{line:5,column:26},end:{line:5,column:59}},"5":{start:{line:6,column:17},end:{line:6,column:21}},"6":{start:{line:7,column:15},end:{line:7,column:34}},"7":{start:{line:8,column:17},end:{line:8,column:32}},"8":{start:{line:9,column:29},end:{line:9,column:61}},"9":{start:{line:11,column:0},end:{line:75,column:2}},"10":{start:{line:13,column:4},end:{line:13,column:47}},"11":{start:{line:13,column:17},end:{line:13,column:46}},"12":{start:{line:17,column:4},end:{line:29,column:6}},"13":{start:{line:18,column:8},end:{line:18,column:40}},"14":{start:{line:21,column:8},end:{line:21,column:51}},"15":{start:{line:22,column:8},end:{line:22,column:28}},"16":{start:{line:23,column:8},end:{line:23,column:40}},"17":{start:{line:24,column:8},end:{line:24,column:40}},"18":{start:{line:25,column:8},end:{line:25,column:41}},"19":{start:{line:27,column:8},end:{line:27,column:46}},"20":{start:{line:32,column:4},end:{line:65,column:6}},"21":{start:{line:33,column:8},end:{line:38,column:10}},"22":{start:{line:34,column:35},end:{line:34,column:132}},"23":{start:{line:35,column:12},end:{line:35,column:47}},"24":{start:{line:37,column:12},end:{line:37,column:49}},"25":{start:{line:40,column:8},end:{line:49,column:10}},"26":{start:{line:41,column:12},end:{line:41,column:71}},"27":{start:{line:43,column:35},end:{line:43,column:80}},"28":{start:{line:45,column:29},end:{line:45,column:43}},"29":{start:{line:47,column:12},end:{line:47,column:44}},"30":{start:{line:48,column:12},end:{line:48,column:52}},"31":{start:{line:51,column:8},end:{line:61,column:10}},"32":{start:{line:53,column:12},end:{line:60,column:13}},"33":{start:{line:54,column:14},end:{line:54,column:84}},"34":{start:{line:55,column:16},end:{line:55,column:62}},"35":{start:{line:57,column:16},end:{line:57,column:38}},"36":{start:{line:58,column:16},end:{line:58,column:67}},"37":{start:{line:59,column:16},end:{line:59,column:111}},"38":{start:{line:69,column:4},end:{line:69,column:47}},"39":{start:{line:69,column:20},end:{line:69,column:46}},"40":{start:{line:71,column:4},end:{line:74,column:6}},"41":{start:{line:72,column:8},end:{line:72,column:40}},"42":{start:{line:73,column:8},end:{line:73,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:46},end:{line:11,column:47}},loc:{start:{line:11,column:52},end:{line:75,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:13,column:46}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:15},end:{line:17,column:16}},loc:{start:{line:17,column:26},end:{line:29,column:5}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:61},end:{line:32,column:62}},loc:{start:{line:32,column:67},end:{line:65,column:5}},line:32},"4":{name:"(anonymous_4)",decl:{start:{line:33,column:19},end:{line:33,column:20}},loc:{start:{line:33,column:30},end:{line:38,column:9}},line:33},"5":{name:"(anonymous_5)",decl:{start:{line:40,column:55},end:{line:40,column:56}},loc:{start:{line:40,column:66},end:{line:49,column:9}},line:40},"6":{name:"(anonymous_6)",decl:{start:{line:51,column:52},end:{line:51,column:53}},loc:{start:{line:51,column:63},end:{line:61,column:9}},line:51},"7":{name:"(anonymous_7)",decl:{start:{line:69,column:14},end:{line:69,column:15}},loc:{start:{line:69,column:20},end:{line:69,column:46}},line:69},"8":{name:"(anonymous_8)",decl:{start:{line:71,column:10},end:{line:71,column:11}},loc:{start:{line:71,column:21},end:{line:74,column:5}},line:71}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"abd7721e66ccfe8b39b73d7ee6975e8ccd0a14cd"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2djzlg1c1c=function(){return actualCoverage;};}return actualCoverage;}cov_2djzlg1c1c();cov_2djzlg1c1c().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_2djzlg1c1c().s[1]++,process);const{mongoose,models:{Establishment}}=(cov_2djzlg1c1c().s[2]++,require('qrmenu-data'));const{utils:{generateNIF:{generateNIF}}}=(cov_2djzlg1c1c().s[3]++,require('qrmenu-commons'));const assignNumOfTables=(cov_2djzlg1c1c().s[4]++,require('./assign-num-of-tables'));const{random}=(cov_2djzlg1c1c().s[5]++,Math);const bcrypt=(cov_2djzlg1c1c().s[6]++,require('bcryptjs'));const{expect}=(cov_2djzlg1c1c().s[7]++,require('chai'));const{UnexistenceError}=(cov_2djzlg1c1c().s[8]++,require('qrmenu-commons/errors'));cov_2djzlg1c1c().s[9]++;describe('server-logic assign-num-of-tables ',()=>{cov_2djzlg1c1c().f[0]++;cov_2djzlg1c1c().s[10]++;before(()=>{cov_2djzlg1c1c().f[1]++;cov_2djzlg1c1c().s[11]++;return mongoose.connect(MONGODB_URL);});let establishment,nif,email,password,establishmentId,workerId,hash;cov_2djzlg1c1c().s[12]++;beforeEach(async()=>{cov_2djzlg1c1c().f[2]++;cov_2djzlg1c1c().s[13]++;await Establishment.deleteMany();cov_2djzlg1c1c().s[14]++;establishment=`establishment-${random()}`;cov_2djzlg1c1c().s[15]++;nif=generateNIF();cov_2djzlg1c1c().s[16]++;email=`e-${random()}@mail.com`;cov_2djzlg1c1c().s[17]++;password=`password${random()}`;cov_2djzlg1c1c().s[18]++;ntables=Math.floor(random()*50);cov_2djzlg1c1c().s[19]++;hash=await bcrypt.hash(password,10);});cov_2djzlg1c1c().s[20]++;describe('correct credentials and add tables correctly',()=>{cov_2djzlg1c1c().f[3]++;cov_2djzlg1c1c().s[21]++;beforeEach(async()=>{cov_2djzlg1c1c().f[4]++;const _establishment=(cov_2djzlg1c1c().s[22]++,await Establishment.create({establishment,nif,staff:[{email,role:"owner",password:hash}]}));cov_2djzlg1c1c().s[23]++;establishmentId=_establishment.id;cov_2djzlg1c1c().s[24]++;workerId=_establishment.staff[0].id;});cov_2djzlg1c1c().s[25]++;it('should succed on add n numbers of tables',async()=>{cov_2djzlg1c1c().f[5]++;cov_2djzlg1c1c().s[26]++;await assignNumOfTables(establishmentId,workerId,ntables);const _establishment=(cov_2djzlg1c1c().s[27]++,await Establishment.findById(establishmentId));const{tables}=(cov_2djzlg1c1c().s[28]++,_establishment);cov_2djzlg1c1c().s[29]++;expect(tables).to.be.an('array');cov_2djzlg1c1c().s[30]++;expect(tables).to.have.lengthOf(ntables);});cov_2djzlg1c1c().s[31]++;it('should fail on wrong establishment id',async()=>{cov_2djzlg1c1c().f[6]++;cov_2djzlg1c1c().s[32]++;try{cov_2djzlg1c1c().s[33]++;await assignNumOfTables("5ef30217e22a4608f83d5d8f",workerId,ntables);cov_2djzlg1c1c().s[34]++;throw new Error('should not reach this point');}catch(error){cov_2djzlg1c1c().s[35]++;expect(error).to.exist;cov_2djzlg1c1c().s[36]++;expect(error).to.be.an.instanceOf(UnexistenceError);cov_2djzlg1c1c().s[37]++;expect(error.message).to.equal("Establishment with id 5ef30217e22a4608f83d5d8f does not exist");}});});cov_2djzlg1c1c().s[38]++;afterEach(()=>{cov_2djzlg1c1c().f[7]++;cov_2djzlg1c1c().s[39]++;return Establishment.deleteMany();});cov_2djzlg1c1c().s[40]++;after(async()=>{cov_2djzlg1c1c().f[8]++;cov_2djzlg1c1c().s[41]++;await Establishment.deleteMany();cov_2djzlg1c1c().s[42]++;await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2lnbi1udW0tb2YtdGFibGVzLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJNT05HT0RCX1VSTCIsInByb2Nlc3MiLCJtb25nb29zZSIsIm1vZGVscyIsIkVzdGFibGlzaG1lbnQiLCJ1dGlscyIsImdlbmVyYXRlTklGIiwiYXNzaWduTnVtT2ZUYWJsZXMiLCJyYW5kb20iLCJNYXRoIiwiYmNyeXB0IiwiZXhwZWN0IiwiVW5leGlzdGVuY2VFcnJvciIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsImVzdGFibGlzaG1lbnQiLCJuaWYiLCJlbWFpbCIsInBhc3N3b3JkIiwiZXN0YWJsaXNobWVudElkIiwid29ya2VySWQiLCJoYXNoIiwiYmVmb3JlRWFjaCIsImRlbGV0ZU1hbnkiLCJudGFibGVzIiwiZmxvb3IiLCJfZXN0YWJsaXNobWVudCIsImNyZWF0ZSIsInN0YWZmIiwicm9sZSIsImlkIiwiaXQiLCJmaW5kQnlJZCIsInRhYmxlcyIsInRvIiwiYmUiLCJhbiIsImhhdmUiLCJsZW5ndGhPZiIsIkVycm9yIiwiZXJyb3IiLCJleGlzdCIsImluc3RhbmNlT2YiLCJtZXNzYWdlIiwiZXF1YWwiLCJhZnRlckVhY2giLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJ3dEpBZVk7bUhBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBQ0EsS0FBTSxDQUFDQyxHQUFHLENBQUUsQ0FBQ0MsZ0JBQWdCLENBQUVDLFdBQW5CLENBQU4sMkJBQXlDQyxPQUF6QyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFDQyxhQUFELENBQXBCLDJCQUF3Q1IsT0FBTyxDQUFDLGFBQUQsQ0FBL0MsQ0FBTixDQUNBLEtBQU0sQ0FBQ1MsS0FBSyxDQUFFLENBQUNDLFdBQVcsQ0FBRSxDQUFDQSxXQUFELENBQWQsQ0FBUiwyQkFBd0NW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LGlCQUFpQixDQUFDLDBCQUFELENBQTZCYyxRQUE3QixDQUF1Q0ksT0FBdkMsQ0FBdkIsQ0FERSx5QkFFQSxLQUFNLElBQUllLENBQUFBLEtBQUosQ0FBVSw2QkFBVixDQUFOLENBQ0gsQ0FBQyxNQUFPQyxLQUFQLENBQWMsMEJBQ1o5QixNQUFNLENBQUM4QixLQUFELENBQU4sQ0FBY04sRUFBZCxDQUFpQk8sS0FBakIsQ0FEWSx5QkFFWi9CLE1BQU0sQ0FBQzhCLEtBQUQsQ0FBTixDQUFjTixFQUFkLENBQWlCQyxFQUFqQixDQUFvQkMsRUFBcEIsQ0FBdUJNLFVBQXZCLENBQWtDL0IsZ0JBQWxDLEVBRlkseUJBR1pELE1BQU0sQ0FBQzhCLEtBQUssQ0FBQ0csT0FBUCxDQUFOLENBQXNCVCxFQUF0QixDQUF5QlUsS0FBekIsQ0FBK0IsK0RBQS9CLEVBQ0gsQ0FDSixDQVZDLENBQUYsQ0FjSCxDQWpDTyxDQUFSLENBckJnRCx5QkEwRGhEQyxTQUFTLENBQUMsSUFBTSx3REFBQTFDLENBQUFBLGFBQWEsQ0FBQ29CLFVBQWQsR0FBMEIsQ0FBakMsQ0FBVCxDQTFEZ0QseUJBNERoRHVCLEtBQUssQ0FBQyxTQUFXLGtEQUNiLEtBQU0zQyxDQUFBQSxhQUFhLENBQUNvQixVQUFkLEVBQU4sQ0FEYSx5QkFFYixLQUFNdEIsQ0FBQUEsUUFBUSxDQUFDOEMsVUFBVCxFQUFOLENBQ0gsQ0FISSxDQUFMLENBSUgsQ0FoRU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXG5jb25zdCB7ZW52OiB7VEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkx9fSA9IHByb2Nlc3NcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczoge0VzdGFibGlzaG1lbnR9IH0gPSByZXF1aXJlKCdxcm1lbnUtZGF0YScpXG5jb25zdCB7dXRpbHM6IHtnZW5lcmF0ZU5JRjoge2dlbmVyYXRlTklGfX19ID0gcmVxdWlyZSgncXJtZW51LWNvbW1vbnMnKVxuY29uc3QgYXNzaWduTnVtT2ZUYWJsZXMgPSByZXF1aXJlKCcuL2Fzc2lnbi1udW0tb2YtdGFibGVzJylcbmNvbnN0IHtyYW5kb219ID0gTWF0aFxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxuY29uc3Qge2V4cGVjdH0gPSByZXF1aXJlKCdjaGFpJylcbmNvbnN0IHsgVW5leGlzdGVuY2VFcnJvciB9ID0gcmVxdWlyZSgncXJtZW51LWNvbW1vbnMvZXJyb3JzJylcblxuZGVzY3JpYmUoJ3NlcnZlci1sb2dpYyBhc3NpZ24tbnVtLW9mLXRhYmxlcyAnLCgpID0+IHtcbiAgICBcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXG5cbiAgICBsZXQgZXN0YWJsaXNobWVudCwgbmlmLCBlbWFpbCwgcGFzc3dvcmQsIGVzdGFibGlzaG1lbnRJZCwgd29ya2VySWQsIGhhc2hcblxuICAgIGJlZm9yZUVhY2goYXN5bmMoKSA9PiB7XG4gICAgICAgIGF3YWl0IEVzdGFibGlzaG1lbnQuZGVsZXRlTWFueSgpXG4gICAgICAgIFxuICAgICAgICAgICBcbiAgICAgICAgZXN0YWJsaXNobWVudCA9IGBlc3RhYmxpc2htZW50LSR7cmFuZG9tKCl9YFxuICAgICAgICBuaWYgPSAgZ2VuZXJhdGVOSUYoKVxuICAgICAgICBlbWFpbCA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZCR7cmFuZG9tKCl9YFxuICAgICAgICBudGFibGVzID0gTWF0aC5mbG9vcihyYW5kb20oKSo1MClcblxuICAgICAgICBoYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuICAgICAgICAgICAgICAgIFxuICAgIH0pXG5cblxuICAgIGRlc2NyaWJlKCdjb3JyZWN0IGNyZWRlbnRpYWxzIGFuZCBhZGQgdGFibGVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgICAgYmVmb3JlRWFjaChhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF9lc3RhYmxpc2htZW50ID0gYXdhaXQgRXN0YWJsaXNobWVudC5jcmVhdGUoe2VzdGFibGlzaG1lbnQsIG5pZiwgc3RhZmY6IFt7ZW1haWwsIHJvbGU6IFwib3duZXJcIiwgcGFzc3dvcmQ6IGhhc2h9XX0pXG4gICAgICAgICAgICBlc3RhYmxpc2htZW50SWQgPSBfZXN0YWJsaXNobWVudC5pZFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB3b3JrZXJJZCA9IF9lc3RhYmxpc2htZW50LnN0YWZmWzBdLmlkXG4gICAgICAgIH0pXG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZWQgb24gYWRkIG4gbnVtYmVycyBvZiB0YWJsZXMnLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGFzc2lnbk51bU9mVGFibGVzKGVzdGFibGlzaG1lbnRJZCwgd29ya2VySWQsIG50YWJsZXMpXG5cbiAgICAgICAgICAgIGNvbnN0IF9lc3RhYmxpc2htZW50ID0gYXdhaXQgRXN0YWJsaXNobWVudC5maW5kQnlJZChlc3RhYmxpc2htZW50SWQpXG5cbiAgICAgICAgICAgIGNvbnN0IHt0YWJsZXN9ID0gX2VzdGFibGlzaG1lbnRcblxuICAgICAgICAgICAgZXhwZWN0KHRhYmxlcykudG8uYmUuYW4oJ2FycmF5JylcbiAgICAgICAgICAgIGV4cGVjdCh0YWJsZXMpLnRvLmhhdmUubGVuZ3RoT2YobnRhYmxlcylcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiB3cm9uZyBlc3RhYmxpc2htZW50IGlkJywgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgYXNzaWduTnVtT2ZUYWJsZXMoXCI1ZWYzMDIxN2UyMmE0NjA4ZjgzZDVkOGZcIiwgd29ya2VySWQsIG50YWJsZXMpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZU9mKFVuZXhpc3RlbmNlRXJyb3IpXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKFwiRXN0YWJsaXNobWVudCB3aXRoIGlkIDVlZjMwMjE3ZTIyYTQ2MDhmODNkNWQ4ZiBkb2VzIG5vdCBleGlzdFwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG5cbiAgICAgICAgXG4gICAgfSlcblxuICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICBhZnRlckVhY2goKCkgPT4gRXN0YWJsaXNobWVudC5kZWxldGVNYW55KCkpXG5cbiAgICBhZnRlcihhc3luYygpID0+IHtcbiAgICAgICAgYXdhaXQgRXN0YWJsaXNobWVudC5kZWxldGVNYW55KClcbiAgICAgICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpXG4gICAgfSlcbn0pIl19