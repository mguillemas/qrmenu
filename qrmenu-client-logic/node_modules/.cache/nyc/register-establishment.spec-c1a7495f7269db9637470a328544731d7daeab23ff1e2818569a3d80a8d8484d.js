function cov_1ycxv8bdsz(){var path="/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-client-logic/register-establishment.spec.js";var hash="d2978ca148dd48294699acccbf2284010b0a5604";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-client-logic/register-establishment.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:75},end:{line:3,column:82}},"2":{start:{line:5,column:30},end:{line:5,column:65}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:40}},"6":{start:{line:9,column:46},end:{line:9,column:71}},"7":{start:{line:10,column:18},end:{line:10,column:40}},"8":{start:{line:11,column:15},end:{line:11,column:34}},"9":{start:{line:12,column:16},end:{line:12,column:36}},"10":{start:{line:13,column:0},end:{line:13,column:39}},"11":{start:{line:15,column:0},end:{line:15,column:25}},"12":{start:{line:17,column:0},end:{line:72,column:2}},"13":{start:{line:19,column:4},end:{line:21,column:5}},"14":{start:{line:19,column:17},end:{line:20,column:90}},"15":{start:{line:20,column:28},end:{line:20,column:89}},"16":{start:{line:25,column:4},end:{line:33,column:5}},"17":{start:{line:26,column:8},end:{line:32,column:14}},"18":{start:{line:28,column:16},end:{line:28,column:59}},"19":{start:{line:29,column:16},end:{line:29,column:40}},"20":{start:{line:30,column:16},end:{line:30,column:48}},"21":{start:{line:31,column:16},end:{line:31,column:49}},"22":{start:{line:35,column:4},end:{line:52,column:5}},"23":{start:{line:37,column:8},end:{line:51,column:52}},"24":{start:{line:38,column:24},end:{line:38,column:55}},"25":{start:{line:40,column:16},end:{line:40,column:24}},"26":{start:{line:41,column:16},end:{line:41,column:57}},"27":{start:{line:43,column:41},end:{line:43,column:55}},"28":{start:{line:45,column:16},end:{line:45,column:76}},"29":{start:{line:46,column:16},end:{line:46,column:56}},"30":{start:{line:47,column:16},end:{line:47,column:69}},"31":{start:{line:49,column:16},end:{line:49,column:81}},"32":{start:{line:51,column:27},end:{line:51,column:51}},"33":{start:{line:71,column:4},end:{line:71,column:69}},"34":{start:{line:71,column:16},end:{line:71,column:68}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:43},end:{line:17,column:44}},loc:{start:{line:17,column:49},end:{line:72,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:11},end:{line:19,column:12}},loc:{start:{line:19,column:17},end:{line:20,column:90}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:14},end:{line:20,column:15}},loc:{start:{line:20,column:28},end:{line:20,column:89}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:25,column:15},end:{line:25,column:16}},loc:{start:{line:26,column:8},end:{line:32,column:14}},line:26},"4":{name:"(anonymous_4)",decl:{start:{line:27,column:18},end:{line:27,column:19}},loc:{start:{line:27,column:24},end:{line:32,column:13}},line:27},"5":{name:"(anonymous_5)",decl:{start:{line:35,column:39},end:{line:35,column:40}},loc:{start:{line:37,column:8},end:{line:51,column:52}},line:37},"6":{name:"(anonymous_6)",decl:{start:{line:38,column:18},end:{line:38,column:19}},loc:{start:{line:38,column:24},end:{line:38,column:55}},line:38},"7":{name:"(anonymous_7)",decl:{start:{line:39,column:18},end:{line:39,column:19}},loc:{start:{line:39,column:36},end:{line:50,column:13}},line:39},"8":{name:"(anonymous_8)",decl:{start:{line:51,column:18},end:{line:51,column:19}},loc:{start:{line:51,column:27},end:{line:51,column:51}},line:51},"9":{name:"(anonymous_9)",decl:{start:{line:71,column:10},end:{line:71,column:11}},loc:{start:{line:71,column:16},end:{line:71,column:68}},line:71}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d2978ca148dd48294699acccbf2284010b0a5604"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1ycxv8bdsz=function(){return actualCoverage;};}return actualCoverage;}cov_1ycxv8bdsz();cov_1ycxv8bdsz().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_API_URL:API_URL}}=(cov_1ycxv8bdsz().s[1]++,process);const registerEstablishment=(cov_1ycxv8bdsz().s[2]++,require('./register-establishment'));const{random}=(cov_1ycxv8bdsz().s[3]++,Math);const{expect}=(cov_1ycxv8bdsz().s[4]++,require('chai'));cov_1ycxv8bdsz().s[5]++;require('qrmenu-commons/polyfills/json');const{utils:{generateNIF:{generateNIF}}}=(cov_1ycxv8bdsz().s[6]++,require('qrmenu-commons'));const{mongo}=(cov_1ycxv8bdsz().s[7]++,require('qrmenu-data'));const bcrypt=(cov_1ycxv8bdsz().s[8]++,require('bcryptjs'));const context=(cov_1ycxv8bdsz().s[9]++,require('./context'));cov_1ycxv8bdsz().s[10]++;require('qrmenu-commons/ponyfills/xhr');cov_1ycxv8bdsz().s[11]++;context.API_URL=API_URL;cov_1ycxv8bdsz().s[12]++;describe('logic - register establishment',()=>{cov_1ycxv8bdsz().f[0]++;let establishments;cov_1ycxv8bdsz().s[13]++;before(()=>{cov_1ycxv8bdsz().f[1]++;cov_1ycxv8bdsz().s[14]++;return mongo.connect(MONGODB_URL).then(connection=>{cov_1ycxv8bdsz().f[2]++;cov_1ycxv8bdsz().s[15]++;return establishments=connection.db().collection('establishments');});});let establishment,nif,email,password;cov_1ycxv8bdsz().s[16]++;beforeEach(()=>{cov_1ycxv8bdsz().f[3]++;cov_1ycxv8bdsz().s[17]++;return establishments.deleteMany().then(()=>{cov_1ycxv8bdsz().f[4]++;cov_1ycxv8bdsz().s[18]++;establishment=`establishment-${random()}`;cov_1ycxv8bdsz().s[19]++;nif=`${generateNIF()}`;cov_1ycxv8bdsz().s[20]++;email=`e-${random()}@mail.com`;cov_1ycxv8bdsz().s[21]++;password=`password-${random()}`;});});cov_1ycxv8bdsz().s[22]++;it('should succeed on valid data',()=>{cov_1ycxv8bdsz().f[5]++;cov_1ycxv8bdsz().s[23]++;return registerEstablishment(establishment,nif,email,password).then(()=>{cov_1ycxv8bdsz().f[6]++;cov_1ycxv8bdsz().s[24]++;return establishments.find().toArray();}).then(establishments=>{cov_1ycxv8bdsz().f[7]++;cov_1ycxv8bdsz().s[25]++;debugger;cov_1ycxv8bdsz().s[26]++;expect(establishments.length).to.equal(1);const[_establishment]=(cov_1ycxv8bdsz().s[27]++,establishments);cov_1ycxv8bdsz().s[28]++;expect(_establishment.establishment).to.equal(establishment);cov_1ycxv8bdsz().s[29]++;expect(_establishment.nif).to.equal(nif);cov_1ycxv8bdsz().s[30]++;expect(_establishment.staff[0].email).to.equal(email);cov_1ycxv8bdsz().s[31]++;return bcrypt.compare(password,_establishment.staff[0].password);}).then(match=>{cov_1ycxv8bdsz().f[8]++;cov_1ycxv8bdsz().s[32]++;return expect(match).to.be.true;});});// describe('when user already exists', () => {
//     beforeEach(() => User.create({ nif, email, password }))
//     it('should fail on trying to register an existing user', () =>
//         registerUser(establishment, nif, email, password)
//             .then(() => { throw new Error('should not reach this point') })
//             .catch(error => {
//                 expect(error).to.exist
//                 expect(error).to.be.an.instanceof(Error)
//                 expect(error.message).to.equal(`user with e-mail ${email} already exists`)
//             })
//     )
// })
// afterEach(() => establishments.deleteMany())
cov_1ycxv8bdsz().s[33]++;after(()=>{cov_1ycxv8bdsz().f[9]++;cov_1ycxv8bdsz().s[34]++;return establishments.deleteMany({}).then(mongo.disconnect);});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLWVzdGFibGlzaG1lbnQuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsIk1PTkdPREJfVVJMIiwiVEVTVF9BUElfVVJMIiwiQVBJX1VSTCIsInByb2Nlc3MiLCJyZWdpc3RlckVzdGFibGlzaG1lbnQiLCJyYW5kb20iLCJNYXRoIiwiZXhwZWN0IiwidXRpbHMiLCJnZW5lcmF0ZU5JRiIsIm1vbmdvIiwiYmNyeXB0IiwiY29udGV4dCIsImRlc2NyaWJlIiwiZXN0YWJsaXNobWVudHMiLCJiZWZvcmUiLCJjb25uZWN0IiwidGhlbiIsImNvbm5lY3Rpb24iLCJkYiIsImNvbGxlY3Rpb24iLCJlc3RhYmxpc2htZW50IiwibmlmIiwiZW1haWwiLCJwYXNzd29yZCIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwiaXQiLCJmaW5kIiwidG9BcnJheSIsImxlbmd0aCIsInRvIiwiZXF1YWwiLCJfZXN0YWJsaXNobWVudCIsInN0YWZmIiwiY29tcGFyZSIsIm1hdGNoIiwiYmUiLCJ0cnVlIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoibzRJQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFnQixDQUFFQyxXQUFwQixDQUFpQ0MsWUFBWSxDQUFFQyxPQUEvQyxDQUFQLDJCQUFxRUMsT0FBckUsQ0FBTixDQUVBLEtBQU1DLENBQUFBLHFCQUFxQiwwQkFBR1IsT0FBTyxDQUFDLDBCQUFELENBQVYsQ0FBM0IsQ0FDQSxLQUFNLENBQUVTLE1BQUYsMkJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBRiwyQkFBYVgsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDLHdCQUNBQSxPQUFPLENBQUMsK0JBQUQsQ0FBUCxDQUNBLEtBQU0sQ0FBQ1ksS0FBSyxDQUFFLENBQUND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Q0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBcEQ2Qyx5QkFzRDdDQyxLQUFLLENBQUMsSUFBTSx3REFBQXpCLENBQUFBLGNBQWMsQ0FBQ1ksVUFBZixDQUEwQixFQUExQixFQUE4QlQsSUFBOUIsQ0FBbUNQLEtBQUssQ0FBQzhCLFVBQXpDLEVBQW9ELENBQTNELENBQUwsQ0FDSCxDQXZETyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcblxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkwsIFRFU1RfQVBJX1VSTDogQVBJX1VSTCAgfSB9ID0gcHJvY2Vzc1xuXG5jb25zdCByZWdpc3RlckVzdGFibGlzaG1lbnQgPSByZXF1aXJlKCcuL3JlZ2lzdGVyLWVzdGFibGlzaG1lbnQnKVxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcbnJlcXVpcmUoJ3FybWVudS1jb21tb25zL3BvbHlmaWxscy9qc29uJylcbmNvbnN0IHt1dGlsczoge2dlbmVyYXRlTklGOiB7Z2VuZXJhdGVOSUZ9fX0gPSByZXF1aXJlKCdxcm1lbnUtY29tbW9ucycpXG5jb25zdCB7IG1vbmdvIH0gPSByZXF1aXJlKCdxcm1lbnUtZGF0YScpXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXG5jb25zdCBjb250ZXh0ID0gcmVxdWlyZSgnLi9jb250ZXh0JylcbnJlcXVpcmUoJ3FybWVudS1jb21tb25zL3BvbnlmaWxscy94aHInKVxuXG5jb250ZXh0LkFQSV9VUkwgPSBBUElfVVJMXG5cbmRlc2NyaWJlKCdsb2dpYyAtIHJlZ2lzdGVyIGVzdGFibGlzaG1lbnQnLCAoKSA9PiB7XG4gICAgbGV0IGVzdGFibGlzaG1lbnRzXG4gICAgYmVmb3JlKCgpID0+IG1vbmdvLmNvbm5lY3QoTU9OR09EQl9VUkwpXG4gICAgICAgIC50aGVuKGNvbm5lY3Rpb24gPT4gZXN0YWJsaXNobWVudHMgPSBjb25uZWN0aW9uLmRiKCkuY29sbGVjdGlvbignZXN0YWJsaXNobWVudHMnKSlcbiAgICApXG5cbiAgICBsZXQgIGVzdGFibGlzaG1lbnQsIG5pZiwgZW1haWwsIHBhc3N3b3JkXG5cbiAgICBiZWZvcmVFYWNoKCgpID0+XG4gICAgICAgIGVzdGFibGlzaG1lbnRzLmRlbGV0ZU1hbnkoKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVzdGFibGlzaG1lbnQgPSBgZXN0YWJsaXNobWVudC0ke3JhbmRvbSgpfWBcbiAgICAgICAgICAgICAgICBuaWYgPSBgJHtnZW5lcmF0ZU5JRigpfWBcbiAgICAgICAgICAgICAgICBlbWFpbCA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxuICAgICAgICAgICAgfSlcbiAgICApXG5cbiAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gdmFsaWQgZGF0YScsICgpID0+XG4gICAgICAgIFxuICAgICAgICByZWdpc3RlckVzdGFibGlzaG1lbnQoZXN0YWJsaXNobWVudCwgbmlmLCBlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiBlc3RhYmxpc2htZW50cy5maW5kKCkudG9BcnJheSgpKVxuICAgICAgICAgICAgLnRoZW4oZXN0YWJsaXNobWVudHMgPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVzdGFibGlzaG1lbnRzLmxlbmd0aCkudG8uZXF1YWwoMSlcblxuICAgICAgICAgICAgICAgIGNvbnN0IFtfZXN0YWJsaXNobWVudF0gPSBlc3RhYmxpc2htZW50c1xuXG4gICAgICAgICAgICAgICAgZXhwZWN0KF9lc3RhYmxpc2htZW50LmVzdGFibGlzaG1lbnQpLnRvLmVxdWFsKGVzdGFibGlzaG1lbnQpXG4gICAgICAgICAgICAgICAgZXhwZWN0KF9lc3RhYmxpc2htZW50Lm5pZikudG8uZXF1YWwobmlmKVxuICAgICAgICAgICAgICAgIGV4cGVjdChfZXN0YWJsaXNobWVudC5zdGFmZlswXS5lbWFpbCkudG8uZXF1YWwoZW1haWwpXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIF9lc3RhYmxpc2htZW50LnN0YWZmWzBdLnBhc3N3b3JkKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKG1hdGNoID0+IGV4cGVjdChtYXRjaCkudG8uYmUudHJ1ZSlcbiAgICApXG5cbiAgICAvLyBkZXNjcmliZSgnd2hlbiB1c2VyIGFscmVhZHkgZXhpc3RzJywgKCkgPT4ge1xuICAgIC8vICAgICBiZWZvcmVFYWNoKCgpID0+IFVzZXIuY3JlYXRlKHsgbmlmLCBlbWFpbCwgcGFzc3dvcmQgfSkpXG5cbiAgICAvLyAgICAgaXQoJ3Nob3VsZCBmYWlsIG9uIHRyeWluZyB0byByZWdpc3RlciBhbiBleGlzdGluZyB1c2VyJywgKCkgPT5cbiAgICAvLyAgICAgICAgIHJlZ2lzdGVyVXNlcihlc3RhYmxpc2htZW50LCBuaWYsIGVtYWlsLCBwYXNzd29yZClcbiAgICAvLyAgICAgICAgICAgICAudGhlbigoKSA9PiB7IHRocm93IG5ldyBFcnJvcignc2hvdWxkIG5vdCByZWFjaCB0aGlzIHBvaW50JykgfSlcbiAgICAvLyAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgIC8vICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XG5cbiAgICAvLyAgICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZW9mKEVycm9yKVxuICAgIC8vICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYHVzZXIgd2l0aCBlLW1haWwgJHtlbWFpbH0gYWxyZWFkeSBleGlzdHNgKVxuICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgLy8gICAgIClcbiAgICAvLyB9KVxuXG4gICAgLy8gYWZ0ZXJFYWNoKCgpID0+IGVzdGFibGlzaG1lbnRzLmRlbGV0ZU1hbnkoKSlcblxuICAgIGFmdGVyKCgpID0+IGVzdGFibGlzaG1lbnRzLmRlbGV0ZU1hbnkoe30pLnRoZW4obW9uZ28uZGlzY29ubmVjdCkpXG59KSJdfQ==