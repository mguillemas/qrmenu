function cov_1xv3m1u4si(){var path="/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-client-logic/authenticate.js";var hash="84f2d0440c67645dbc9c1f3589bc37912d9ceca5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcgm97/bootcamp/collab/skylab-bootcamp-202004/staff/marc-guillemas/qrmenu/qrmenu-client-logic/authenticate.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:36}},"1":{start:{line:2,column:0},end:{line:2,column:42}},"2":{start:{line:3,column:0},end:{line:3,column:39}},"3":{start:{line:4,column:36},end:{line:4,column:61}},"4":{start:{line:12,column:0},end:{line:33,column:15}},"5":{start:{line:13,column:4},end:{line:13,column:21}},"6":{start:{line:14,column:4},end:{line:14,column:25}},"7":{start:{line:15,column:4},end:{line:15,column:55}},"8":{start:{line:17,column:4},end:{line:31,column:6}},"9":{start:{line:24,column:8},end:{line:27,column:9}},"10":{start:{line:25,column:28},end:{line:25,column:44}},"11":{start:{line:26,column:12},end:{line:26,column:24}},"12":{start:{line:28,column:24},end:{line:28,column:40}},"13":{start:{line:30,column:8},end:{line:30,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:17},end:{line:12,column:18}},loc:{start:{line:12,column:48},end:{line:33,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:10},end:{line:23,column:11}},loc:{start:{line:23,column:30},end:{line:31,column:5}},line:23}},branchMap:{"0":{loc:{start:{line:24,column:8},end:{line:27,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:27,column:9}},{start:{line:24,column:8},end:{line:27,column:9}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"84f2d0440c67645dbc9c1f3589bc37912d9ceca5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1xv3m1u4si=function(){return actualCoverage;};}return actualCoverage;}cov_1xv3m1u4si();const context=(cov_1xv3m1u4si().s[0]++,require('./context'));cov_1xv3m1u4si().s[1]++;require('qrmenu-commons/polyfills/string');cov_1xv3m1u4si().s[2]++;require('qrmenu-commons/polyfills/url');const{utils:{Email,call,NIF}}=(cov_1xv3m1u4si().s[3]++,require('qrmenu-commons'));/**
 * @param {string} nif of the establishment 
 * @param {string} email of the worker
 * @param {string} password of the worker
 */cov_1xv3m1u4si().s[4]++;module.exports=function(nif,email,password){cov_1xv3m1u4si().f[0]++;cov_1xv3m1u4si().s[5]++;NIF.validate(nif);cov_1xv3m1u4si().s[6]++;Email.validate(email);cov_1xv3m1u4si().s[7]++;String.validate.lengthGreaterEqualThan(password,8);cov_1xv3m1u4si().s[8]++;return call('POST',`${this.API_URL}/user/auth`,`{"nif":"${nif}", "email":"${email}", "password": "${password}"}`,{'Content-type':'application/json'}).then(({status,body})=>{cov_1xv3m1u4si().f[1]++;cov_1xv3m1u4si().s[9]++;if(status===200){cov_1xv3m1u4si().b[0][0]++;const{token}=(cov_1xv3m1u4si().s[10]++,JSON.parse(body));cov_1xv3m1u4si().s[11]++;return token;}else{cov_1xv3m1u4si().b[0][1]++;}const{error}=(cov_1xv3m1u4si().s[12]++,JSON.parse(body));cov_1xv3m1u4si().s[13]++;throw new Error(error);});}.bind(context);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZS5qcyJdLCJuYW1lcyI6WyJjb250ZXh0IiwicmVxdWlyZSIsInV0aWxzIiwiRW1haWwiLCJjYWxsIiwiTklGIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5pZiIsImVtYWlsIiwicGFzc3dvcmQiLCJ2YWxpZGF0ZSIsIlN0cmluZyIsImxlbmd0aEdyZWF0ZXJFcXVhbFRoYW4iLCJBUElfVVJMIiwidGhlbiIsInN0YXR1cyIsImJvZHkiLCJ0b2tlbiIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiRXJyb3IiLCJiaW5kIl0sIm1hcHBpbmdzIjoidWlFQWVZOzJGQWZaLEtBQU1BLENBQUFBLE9BQU8sMEJBQUdDLE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBYixDLHdCQUNBQSxPQUFPLENBQUMsaUNBQUQsQ0FBUCxDLHdCQUNBQSxPQUFPLENBQUMsOEJBQUQsQ0FBUCxDQUNBLEtBQU0sQ0FBQ0MsS0FBSyxDQUFFLENBQUNDLEtBQUQsQ0FBUUMsSUFBUixDQUFjQyxHQUFkLENBQVIsMkJBQThCSixPQUFPLENBQUMsZ0JBQUQsQ0FBckMsQ0FBTixDQUVBOzs7OzJCQU1BSyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsU0FBU0MsR0FBVCxDQUFjQyxLQUFkLENBQXFCQyxRQUFyQixDQUErQixpREFDNUNMLEdBQUcsQ0FBQ00sUUFBSixDQUFhSCxHQUFiLEVBRDRDLHdCQUU1Q0wsS0FBSyxDQUFDUSxRQUFOLENBQWVGLEtBQWYsRUFGNEMsd0JBRzVDRyxNQUFNLENBQUNELFFBQVAsQ0FBZ0JFLHNCQUFoQixDQUF1Q0gsUUFBdkMsQ0FBaUQsQ0FBakQsRUFINEMsd0JBSzVDLE1BQU9OLENBQUFBLElBQUksQ0FDUCxNQURPLENBRU4sR0FBRSxLQUFLVSxPQUFRLFlBRlQsQ0FHTixXQUFVTixHQUFJLGVBQWNDLEtBQU0sbUJBQWtCQyxRQUFTLElBSHZELENBSVAsQ0FBQyxlQUFpQixrQkFBbEIsQ0FKTyxDQUFKLENBTU5LLElBTk0sQ0FNRCxDQUFDLENBQUNDLE1BQUQsQ0FBU0MsSUFBVCxDQUFELEdBQW9CLGlEQUN0QixHQUFHRCxNQUFNLEdBQUssR0FBZCxDQUFtQiw0QkFDZixLQUFNLENBQUNFLEtBQUQsNEJBQVVDLElBQUksQ0FBQ0MsS0FBTCxDQUFXSCxJQUFYLENBQVYsQ0FBTixDQURlLHlCQUVmLE1BQU9DLENBQUFBLEtBQVAsQ0FDSCxDQUhELGlDQUlBLEtBQU0sQ0FBQ0csS0FBRCw0QkFBVUYsSUFBSSxDQUFDQyxLQUFMLENBQVdILElBQVgsQ0FBVixDQUFOLENBTHNCLHlCQU90QixLQUFNLElBQUlLLENBQUFBLEtBQUosQ0FBVUQsS0FBVixDQUFOLENBQ0gsQ0FkTSxDQUFQLENBZ0JILENBckJnQixDQXFCZkUsSUFyQmUsQ0FxQlZ2QixPQXJCVSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbnRleHQgPSByZXF1aXJlKCcuL2NvbnRleHQnKVxucmVxdWlyZSgncXJtZW51LWNvbW1vbnMvcG9seWZpbGxzL3N0cmluZycpXG5yZXF1aXJlKCdxcm1lbnUtY29tbW9ucy9wb2x5ZmlsbHMvdXJsJylcbmNvbnN0IHt1dGlsczoge0VtYWlsLCBjYWxsLCBOSUZ9fSA9IHJlcXVpcmUoJ3FybWVudS1jb21tb25zJylcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmlmIG9mIHRoZSBlc3RhYmxpc2htZW50IFxuICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIG9mIHRoZSB3b3JrZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZCBvZiB0aGUgd29ya2VyXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuaWYsIGVtYWlsLCBwYXNzd29yZCkge1xuICAgIE5JRi52YWxpZGF0ZShuaWYpXG4gICAgRW1haWwudmFsaWRhdGUoZW1haWwpXG4gICAgU3RyaW5nLnZhbGlkYXRlLmxlbmd0aEdyZWF0ZXJFcXVhbFRoYW4ocGFzc3dvcmQsIDgpXG5cbiAgICByZXR1cm4gY2FsbChcbiAgICAgICAgJ1BPU1QnLFxuICAgICAgICBgJHt0aGlzLkFQSV9VUkx9L3VzZXIvYXV0aGAsXG4gICAgICAgIGB7XCJuaWZcIjpcIiR7bmlmfVwiLCBcImVtYWlsXCI6XCIke2VtYWlsfVwiLCBcInBhc3N3b3JkXCI6IFwiJHtwYXNzd29yZH1cIn1gLFxuICAgICAgICB7J0NvbnRlbnQtdHlwZScgOiAnYXBwbGljYXRpb24vanNvbid9XG4gICAgKVxuICAgIC50aGVuKCh7c3RhdHVzLCBib2R5fSkgPT4ge1xuICAgICAgICBpZihzdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgY29uc3Qge3Rva2VufSA9IEpTT04ucGFyc2UoYm9keSlcbiAgICAgICAgICAgIHJldHVybiB0b2tlblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHtlcnJvcn0gPSBKU09OLnBhcnNlKGJvZHkpXG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKVxuICAgIH0pXG5cbn0uYmluZChjb250ZXh0KVxuIl19